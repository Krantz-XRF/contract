<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Documentation.SBV.Examples.CodeGeneration.CRC_USB5</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">sbv-8.6: SMT Based Verification: Symbolic Haskell theorem prover using SMT solving.</span><ul class="links" id="page-menu"><li><a href="src/Documentation.SBV.Examples.CodeGeneration.CRC_USB5.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Levent Erkok</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>erkokl@gmail.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Documentation.SBV.Examples.CodeGeneration.CRC_USB5</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">The USB polynomial</a></li><li><a href="#g:2">Computing CRCs</a></li><li><a href="#g:3">Correctness</a></li><li><a href="#g:4">Code generation</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Computing the CRC symbolically, using the USB polynomial. We also
 generating C code for it as well. This example demonstrates the
 use of the <code><a href="Data-SBV-Tools-Polynomial.html#v:crcBV" title="Data.SBV.Tools.Polynomial">crcBV</a></code> function, along with how CRC's can be computed
 mathematically using polynomial division. While the results are the
 same (i.e., proven equivalent, see <code><a href="Documentation-SBV-Examples-CodeGeneration-CRC_USB5.html#v:crcGood" title="Documentation.SBV.Examples.CodeGeneration.CRC_USB5">crcGood</a></code> below), the internal
 CRC implementation generates much better code, compare <code><a href="Documentation-SBV-Examples-CodeGeneration-CRC_USB5.html#v:cg1" title="Documentation.SBV.Examples.CodeGeneration.CRC_USB5">cg1</a></code> vs <code><a href="Documentation-SBV-Examples-CodeGeneration-CRC_USB5.html#v:cg2" title="Documentation.SBV.Examples.CodeGeneration.CRC_USB5">cg2</a></code> below.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:usb5">usb5</a> :: <a href="Data-SBV-Internals.html#t:SWord16" title="Data.SBV.Internals">SWord16</a></li><li class="src short"><a href="#v:crcUSB">crcUSB</a> :: <a href="Data-SBV-Internals.html#t:SWord16" title="Data.SBV.Internals">SWord16</a> -&gt; <a href="Data-SBV-Internals.html#t:SWord16" title="Data.SBV.Internals">SWord16</a></li><li class="src short"><a href="#v:crcUSB-39-">crcUSB'</a> :: <a href="Data-SBV-Internals.html#t:SWord16" title="Data.SBV.Internals">SWord16</a> -&gt; <a href="Data-SBV-Internals.html#t:SWord16" title="Data.SBV.Internals">SWord16</a></li><li class="src short"><a href="#v:crcGood">crcGood</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Data-SBV-Trans.html#t:ThmResult" title="Data.SBV.Trans">ThmResult</a></li><li class="src short"><a href="#v:cg1">cg1</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:cg2">cg2</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>The USB polynomial</h1></a><div class="top"><p class="src"><a id="v:usb5" class="def">usb5</a> :: <a href="Data-SBV-Internals.html#t:SWord16" title="Data.SBV.Internals">SWord16</a> <a href="src/Documentation.SBV.Examples.CodeGeneration.CRC_USB5.html#usb5" class="link">Source</a> <a href="#v:usb5" class="selflink">#</a></p><div class="doc"><p>The USB CRC polynomial: <code>x^5 + x^2 + 1</code>.
 Although this polynomial needs just 6 bits to represent (5 if higher
 order bit is implicitly assumed to be set), we'll simply use a 16 bit
 number for its representation to keep things simple for code generation
 purposes.</p></div></div><a href="#g:2" id="g:2"><h1>Computing CRCs</h1></a><div class="top"><p class="src"><a id="v:crcUSB" class="def">crcUSB</a> :: <a href="Data-SBV-Internals.html#t:SWord16" title="Data.SBV.Internals">SWord16</a> -&gt; <a href="Data-SBV-Internals.html#t:SWord16" title="Data.SBV.Internals">SWord16</a> <a href="src/Documentation.SBV.Examples.CodeGeneration.CRC_USB5.html#crcUSB" class="link">Source</a> <a href="#v:crcUSB" class="selflink">#</a></p><div class="doc"><p>Given an 11 bit message, compute the CRC of it using the USB polynomial,
 which is 5 bits, and then append it to the msg to get a 16-bit word. Again,
 the incoming 11-bits is represented as a 16-bit word, with 5 highest bits
 essentially ignored for input purposes.</p></div></div><div class="top"><p class="src"><a id="v:crcUSB-39-" class="def">crcUSB'</a> :: <a href="Data-SBV-Internals.html#t:SWord16" title="Data.SBV.Internals">SWord16</a> -&gt; <a href="Data-SBV-Internals.html#t:SWord16" title="Data.SBV.Internals">SWord16</a> <a href="src/Documentation.SBV.Examples.CodeGeneration.CRC_USB5.html#crcUSB%27" class="link">Source</a> <a href="#v:crcUSB-39-" class="selflink">#</a></p><div class="doc"><p>Alternate method for computing the CRC, <em>mathematically</em>. We shift
 the number to the left by 5, and then compute the remainder from the
 polynomial division by the USB polynomial. The result is then appended
 to the end of the message.</p></div></div><a href="#g:3" id="g:3"><h1>Correctness</h1></a><div class="top"><p class="src"><a id="v:crcGood" class="def">crcGood</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Data-SBV-Trans.html#t:ThmResult" title="Data.SBV.Trans">ThmResult</a> <a href="src/Documentation.SBV.Examples.CodeGeneration.CRC_USB5.html#crcGood" class="link">Source</a> <a href="#v:crcGood" class="selflink">#</a></p><div class="doc"><p>Prove that the custom <code><a href="Data-SBV-Tools-Polynomial.html#v:crcBV" title="Data.SBV.Tools.Polynomial">crcBV</a></code> function is equivalent to the mathematical
 definition of CRC's for 11 bit messages. We have:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>crcGood
</code></strong>Q.E.D.
</pre></div></div><a href="#g:4" id="g:4"><h1>Code generation</h1></a><div class="top"><p class="src"><a id="v:cg1" class="def">cg1</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Documentation.SBV.Examples.CodeGeneration.CRC_USB5.html#cg1" class="link">Source</a> <a href="#v:cg1" class="selflink">#</a></p><div class="doc"><p>Generate a C function to compute the USB CRC, using the internal CRC
 function.</p></div></div><div class="top"><p class="src"><a id="v:cg2" class="def">cg2</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Documentation.SBV.Examples.CodeGeneration.CRC_USB5.html#cg2" class="link">Source</a> <a href="#v:cg2" class="selflink">#</a></p><div class="doc"><p>Generate a C function to compute the USB CRC, using the mathematical
 definition of the CRCs. While this version generates functionally eqivalent
 C code, it's less efficient; it has about 30% more code. So, the above
 version is preferable for code generation purposes.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>