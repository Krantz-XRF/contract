<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- Module    : Data.SBV.Compilers.CodeGen</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- Copyright : (c) Levent Erkok</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- License   : BSD3</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- Maintainer: erkokl@gmail.com</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- Stability : experimental</span><span>
</span><span id="line-8"></span><span class="hs-comment">--</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Code generation utilities</span><span>
</span><span id="line-10"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE CPP                        #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances          #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wall -Werror #-}</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.SBV.Compilers.CodeGen</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-19"></span><span>        </span><span class="annot"><span class="hs-comment">-- * The codegen monad</span></span><span>
</span><span id="line-20"></span><span>          </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier">SBVCodeGen</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgSym"><span class="hs-identifier">cgSym</span></a></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Specifying inputs, SBV variants</span></span><span>
</span><span id="line-23"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgInput"><span class="hs-identifier">cgInput</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgInputArr"><span class="hs-identifier">cgInputArr</span></a></span><span>
</span><span id="line-24"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgOutput"><span class="hs-identifier">cgOutput</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgOutputArr"><span class="hs-identifier">cgOutputArr</span></a></span><span>
</span><span id="line-25"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgReturn"><span class="hs-identifier">cgReturn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgReturnArr"><span class="hs-identifier">cgReturnArr</span></a></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Specifying inputs, SVal variants</span></span><span>
</span><span id="line-28"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#svCgInput"><span class="hs-identifier">svCgInput</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#svCgInputArr"><span class="hs-identifier">svCgInputArr</span></a></span><span>
</span><span id="line-29"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#svCgOutput"><span class="hs-identifier">svCgOutput</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#svCgOutputArr"><span class="hs-identifier">svCgOutputArr</span></a></span><span>
</span><span id="line-30"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#svCgReturn"><span class="hs-identifier">svCgReturn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#svCgReturnArr"><span class="hs-identifier">svCgReturnArr</span></a></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Settings</span></span><span>
</span><span id="line-33"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgPerformRTCs"><span class="hs-identifier">cgPerformRTCs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgSetDriverValues"><span class="hs-identifier">cgSetDriverValues</span></a></span><span>
</span><span id="line-34"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgAddPrototype"><span class="hs-identifier">cgAddPrototype</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgAddDecl"><span class="hs-identifier">cgAddDecl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgAddLDFlags"><span class="hs-identifier">cgAddLDFlags</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgIgnoreSAssert"><span class="hs-identifier">cgIgnoreSAssert</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgOverwriteFiles"><span class="hs-identifier">cgOverwriteFiles</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgShowU8UsingHex"><span class="hs-identifier">cgShowU8UsingHex</span></a></span><span>
</span><span id="line-35"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgIntegerSize"><span class="hs-identifier">cgIntegerSize</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgSRealType"><span class="hs-identifier">cgSRealType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgSRealType"><span class="hs-identifier">CgSRealType</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Infrastructure</span></span><span>
</span><span id="line-38"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgTarget"><span class="hs-identifier">CgTarget</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgConfig"><span class="hs-identifier">CgConfig</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgState"><span class="hs-identifier">CgState</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmBundle"><span class="hs-identifier">CgPgmBundle</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmKind"><span class="hs-identifier">CgPgmKind</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgVal"><span class="hs-identifier">CgVal</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#defaultCgConfig"><span class="hs-identifier">defaultCgConfig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#initCgState"><span class="hs-identifier">initCgState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#isCgDriver"><span class="hs-identifier">isCgDriver</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#isCgMakefile"><span class="hs-identifier">isCgMakefile</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Generating collateral</span></span><span>
</span><span id="line-42"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgGenerateDriver"><span class="hs-identifier">cgGenerateDriver</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgGenerateMakefile"><span class="hs-identifier">cgGenerateMakefile</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#codeGen"><span class="hs-identifier">codeGen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#renderCgPgmBundle"><span class="hs-identifier">renderCgPgmBundle</span></a></span><span>
</span><span id="line-43"></span><span>        </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">filterM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">replicateM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unless</span></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans</span></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">liftIO</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">lift</span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State.Lazy</span></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadState</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">StateT</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">modify'</span></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Char</span></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">toLower</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isSpace</span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">nub</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isPrefixOf</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">intercalate</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(\\)</span></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Directory</span></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">createDirectoryIfMissing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">doesDirectoryExist</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">doesFileExist</span></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.FilePath</span></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;/&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.IO</span></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">hFlush</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">stdout</span></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Text.PrettyPrint.HughesPJ</span></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Doc</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">vcat</span></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Text.PrettyPrint.HughesPJ</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">render</span></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.SBV.Core.Data.html"><span class="hs-identifier">Data.SBV.Core.Data</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.SBV.Core.Symbolic.html"><span class="hs-identifier">Data.SBV.Core.Symbolic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#MonadSymbolic"><span class="hs-identifier">MonadSymbolic</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#svToSymSV"><span class="hs-identifier">svToSymSV</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#svMkSymVar"><span class="hs-identifier">svMkSymVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#outputSVal"><span class="hs-identifier">outputSVal</span></a></span><span class="hs-special">)</span><span class="hs-cpp">

#if MIN_VERSION_base(4,11,0)
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Fail</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Fail</span></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-64"></span><span class="hs-comment">-- | Abstract over code generation for different languages</span><span>
</span><span id="line-65"></span><span class="hs-keyword">class</span><span> </span><span id="CgTarget"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgTarget"><span class="hs-identifier hs-var">CgTarget</span></a></span></span><span> </span><span id="local-6989586621681154199"><span class="annot"><a href="#local-6989586621681154199"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-66"></span><span>  </span><span id="targetName"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#targetName"><span class="hs-identifier hs-type">targetName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681154199"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-67"></span><span>  </span><span id="translate"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#translate"><span class="hs-identifier hs-type">translate</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681154199"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgConfig"><span class="hs-identifier hs-type">CgConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgState"><span class="hs-identifier hs-type">CgState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#Result"><span class="hs-identifier hs-type">Result</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmBundle"><span class="hs-identifier hs-type">CgPgmBundle</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-comment">-- | Options for code-generation.</span><span>
</span><span id="line-70"></span><span class="hs-keyword">data</span><span> </span><span id="CgConfig"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgConfig"><span class="hs-identifier hs-var">CgConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CgConfig"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgConfig"><span class="hs-identifier hs-var">CgConfig</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-71"></span><span>          </span><span id="cgRTC"><span class="annot"><span class="annottext">CgConfig -&gt; Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgRTC"><span class="hs-identifier hs-var hs-var">cgRTC</span></a></span></span><span>                </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>               </span><span class="hs-comment">-- ^ If 'True', perform run-time-checks for index-out-of-bounds or shifting-by-large values etc.</span><span>
</span><span id="line-72"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgInteger"><span class="annot"><span class="annottext">CgConfig -&gt; Maybe Int
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInteger"><span class="hs-identifier hs-var hs-var">cgInteger</span></a></span></span><span>            </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>          </span><span class="hs-comment">-- ^ Bit-size to use for representing SInteger (if any)</span><span>
</span><span id="line-73"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgReal"><span class="annot"><span class="annottext">CgConfig -&gt; Maybe CgSRealType
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReal"><span class="hs-identifier hs-var hs-var">cgReal</span></a></span></span><span>               </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgSRealType"><span class="hs-identifier hs-type">CgSRealType</span></a></span><span>  </span><span class="hs-comment">-- ^ Type to use for representing SReal (if any)</span><span>
</span><span id="line-74"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgDriverVals"><span class="annot"><span class="annottext">CgConfig -&gt; [Integer]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgDriverVals"><span class="hs-identifier hs-var hs-var">cgDriverVals</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">]</span><span>          </span><span class="hs-comment">-- ^ Values to use for the driver program generated, useful for generating non-random drivers.</span><span>
</span><span id="line-75"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgGenDriver"><span class="annot"><span class="annottext">CgConfig -&gt; Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgGenDriver"><span class="hs-identifier hs-var hs-var">cgGenDriver</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>               </span><span class="hs-comment">-- ^ If 'True', will generate a driver program</span><span>
</span><span id="line-76"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgGenMakefile"><span class="annot"><span class="annottext">CgConfig -&gt; Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgGenMakefile"><span class="hs-identifier hs-var hs-var">cgGenMakefile</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>               </span><span class="hs-comment">-- ^ If 'True', will generate a makefile</span><span>
</span><span id="line-77"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgIgnoreAsserts"><span class="annot"><span class="annottext">CgConfig -&gt; Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgIgnoreAsserts"><span class="hs-identifier hs-var hs-var">cgIgnoreAsserts</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>               </span><span class="hs-comment">-- ^ If 'True', will ignore 'Data.SBV.sAssert' calls</span><span>
</span><span id="line-78"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgOverwriteGenerated"><span class="annot"><span class="annottext">CgConfig -&gt; Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOverwriteGenerated"><span class="hs-identifier hs-var hs-var">cgOverwriteGenerated</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>               </span><span class="hs-comment">-- ^ If 'True', will overwrite the generated files without prompting.</span><span>
</span><span id="line-79"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgShowU8InHex"><span class="annot"><span class="annottext">CgConfig -&gt; Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgShowU8InHex"><span class="hs-identifier hs-var hs-var">cgShowU8InHex</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>               </span><span class="hs-comment">-- ^ If 'True', then 8-bit unsigned values will be shown in hex as well, otherwise decimal. (Other types always shown in hex.)</span><span>
</span><span id="line-80"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-comment">-- | Default options for code generation. The run-time checks are turned-off, and the driver values are completely random.</span><span>
</span><span id="line-83"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#defaultCgConfig"><span class="hs-identifier hs-type">defaultCgConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgConfig"><span class="hs-identifier hs-type">CgConfig</span></a></span><span>
</span><span id="line-84"></span><span id="defaultCgConfig"><span class="annot"><span class="annottext">defaultCgConfig :: CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#defaultCgConfig"><span class="hs-identifier hs-var hs-var">defaultCgConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CgConfig :: Bool
-&gt; Maybe Int
-&gt; Maybe CgSRealType
-&gt; [Integer]
-&gt; Bool
-&gt; Bool
-&gt; Bool
-&gt; Bool
-&gt; Bool
-&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#CgConfig"><span class="hs-identifier hs-type hs-type">CgConfig</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgRTC :: Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgRTC"><span class="hs-identifier hs-var">cgRTC</span></a></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-85"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgInteger :: Maybe Int
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInteger"><span class="hs-identifier hs-var">cgInteger</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-86"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgReal :: Maybe CgSRealType
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReal"><span class="hs-identifier hs-var">cgReal</span></a></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CgSRealType
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-87"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgDriverVals :: [Integer]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgDriverVals"><span class="hs-identifier hs-var">cgDriverVals</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-88"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgGenDriver :: Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgGenDriver"><span class="hs-identifier hs-var">cgGenDriver</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-89"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgGenMakefile :: Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgGenMakefile"><span class="hs-identifier hs-var">cgGenMakefile</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-90"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgIgnoreAsserts :: Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgIgnoreAsserts"><span class="hs-identifier hs-var">cgIgnoreAsserts</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-91"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgOverwriteGenerated :: Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOverwriteGenerated"><span class="hs-identifier hs-var">cgOverwriteGenerated</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-92"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgShowU8InHex :: Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgShowU8InHex"><span class="hs-identifier hs-var">cgShowU8InHex</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-93"></span><span>                           </span><span class="hs-special">}</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-comment">-- | Abstraction of target language values</span><span>
</span><span id="line-96"></span><span class="hs-keyword">data</span><span> </span><span id="CgVal"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgVal"><span class="hs-identifier hs-var">CgVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CgAtomic"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgAtomic"><span class="hs-identifier hs-var">CgAtomic</span></a></span></span><span> </span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#SV"><span class="hs-identifier hs-type">SV</span></a></span><span>
</span><span id="line-97"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span id="CgArray"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgArray"><span class="hs-identifier hs-var">CgArray</span></a></span></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#SV"><span class="hs-identifier hs-type">SV</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="hs-comment">-- | Code-generation state</span><span>
</span><span id="line-100"></span><span class="hs-keyword">data</span><span> </span><span id="CgState"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgState"><span class="hs-identifier hs-var">CgState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CgState"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgState"><span class="hs-identifier hs-var">CgState</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-101"></span><span>          </span><span id="cgInputs"><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var hs-var">cgInputs</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgVal"><span class="hs-identifier hs-type">CgVal</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-102"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgOutputs"><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var hs-var">cgOutputs</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgVal"><span class="hs-identifier hs-type">CgVal</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-103"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgReturns"><span class="annot"><span class="annottext">CgState -&gt; [CgVal]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReturns"><span class="hs-identifier hs-var hs-var">cgReturns</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgVal"><span class="hs-identifier hs-type">CgVal</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-104"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgPrototypes"><span class="annot"><span class="annottext">CgState -&gt; [String]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgPrototypes"><span class="hs-identifier hs-var hs-var">cgPrototypes</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>    </span><span class="hs-comment">-- extra stuff that goes into the header</span><span>
</span><span id="line-105"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgDecls"><span class="annot"><span class="annottext">CgState -&gt; [String]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgDecls"><span class="hs-identifier hs-var hs-var">cgDecls</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>    </span><span class="hs-comment">-- extra stuff that goes into the top of the file</span><span>
</span><span id="line-106"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgLDFlags"><span class="annot"><span class="annottext">CgState -&gt; [String]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgLDFlags"><span class="hs-identifier hs-var hs-var">cgLDFlags</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>    </span><span class="hs-comment">-- extra options that go to the linker</span><span>
</span><span id="line-107"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="cgFinalConfig"><span class="annot"><span class="annottext">CgState -&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var hs-var">cgFinalConfig</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgConfig"><span class="hs-identifier hs-type">CgConfig</span></a></span><span>
</span><span id="line-108"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-comment">-- | Initial configuration for code-generation</span><span>
</span><span id="line-111"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#initCgState"><span class="hs-identifier hs-type">initCgState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgState"><span class="hs-identifier hs-type">CgState</span></a></span><span>
</span><span id="line-112"></span><span id="initCgState"><span class="annot"><span class="annottext">initCgState :: CgState
</span><a href="Data.SBV.Compilers.CodeGen.html#initCgState"><span class="hs-identifier hs-var hs-var">initCgState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CgState :: [(String, CgVal)]
-&gt; [(String, CgVal)]
-&gt; [CgVal]
-&gt; [String]
-&gt; [String]
-&gt; [String]
-&gt; CgConfig
-&gt; CgState
</span><a href="Data.SBV.Compilers.CodeGen.html#CgState"><span class="hs-identifier hs-type hs-type">CgState</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-113"></span><span>          </span><span class="annot"><span class="annottext">cgInputs :: [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var">cgInputs</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-114"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgOutputs :: [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var">cgOutputs</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-115"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgReturns :: [CgVal]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReturns"><span class="hs-identifier hs-var">cgReturns</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-116"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgPrototypes :: [String]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgPrototypes"><span class="hs-identifier hs-var">cgPrototypes</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-117"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgDecls :: [String]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgDecls"><span class="hs-identifier hs-var">cgDecls</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-118"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgLDFlags :: [String]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgLDFlags"><span class="hs-identifier hs-var">cgLDFlags</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-119"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgFinalConfig :: CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var">cgFinalConfig</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#defaultCgConfig"><span class="hs-identifier hs-var">defaultCgConfig</span></a></span><span>
</span><span id="line-120"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="hs-comment">-- | The code-generation monad. Allows for precise layout of input values</span><span>
</span><span id="line-123"></span><span class="hs-comment">-- reference parameters (for returning composite values in languages such as C),</span><span>
</span><span id="line-124"></span><span class="hs-comment">-- and return values.</span><span>
</span><span id="line-125"></span><span class="hs-keyword">newtype</span><span> </span><span id="SBVCodeGen"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-var">SBVCodeGen</span></a></span></span><span> </span><span id="local-6989586621681154279"><span class="annot"><a href="#local-6989586621681154279"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SBVCodeGen"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-var">SBVCodeGen</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StateT</span></span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgState"><span class="hs-identifier hs-type">CgState</span></a></span><span> </span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#Symbolic"><span class="hs-identifier hs-type">Symbolic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681154279"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>                   </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span> </span><span id="local-6989586621681154100"><span id="local-6989586621681154102"><span id="local-6989586621681154104"><span id="local-6989586621681154106"><span id="local-6989586621681154108"><span class="annot"><span class="annottext">Functor SBVCodeGen
a -&gt; SBVCodeGen a
Functor SBVCodeGen =&gt;
(forall a. a -&gt; SBVCodeGen a)
-&gt; (forall a b.
    SBVCodeGen (a -&gt; b) -&gt; SBVCodeGen a -&gt; SBVCodeGen b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen c)
-&gt; (forall a b. SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen b)
-&gt; (forall a b. SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen a)
-&gt; Applicative SBVCodeGen
SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen b
SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen a
SBVCodeGen (a -&gt; b) -&gt; SBVCodeGen a -&gt; SBVCodeGen b
(a -&gt; b -&gt; c) -&gt; SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen c
forall a. a -&gt; SBVCodeGen a
forall a b. SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen a
forall a b. SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen b
forall a b. SBVCodeGen (a -&gt; b) -&gt; SBVCodeGen a -&gt; SBVCodeGen b
forall a b c.
(a -&gt; b -&gt; c) -&gt; SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen a
$c&lt;* :: forall a b. SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen a
*&gt; :: SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen b
$c*&gt; :: forall a b. SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen b
liftA2 :: (a -&gt; b -&gt; c) -&gt; SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen c
$cliftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen c
&lt;*&gt; :: SBVCodeGen (a -&gt; b) -&gt; SBVCodeGen a -&gt; SBVCodeGen b
$c&lt;*&gt; :: forall a b. SBVCodeGen (a -&gt; b) -&gt; SBVCodeGen a -&gt; SBVCodeGen b
pure :: a -&gt; SBVCodeGen a
$cpure :: forall a. a -&gt; SBVCodeGen a
$cp1Applicative :: Functor SBVCodeGen
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154095"><span id="local-6989586621681154097"><span class="annot"><span class="annottext">a -&gt; SBVCodeGen b -&gt; SBVCodeGen a
(a -&gt; b) -&gt; SBVCodeGen a -&gt; SBVCodeGen b
(forall a b. (a -&gt; b) -&gt; SBVCodeGen a -&gt; SBVCodeGen b)
-&gt; (forall a b. a -&gt; SBVCodeGen b -&gt; SBVCodeGen a)
-&gt; Functor SBVCodeGen
forall a b. a -&gt; SBVCodeGen b -&gt; SBVCodeGen a
forall a b. (a -&gt; b) -&gt; SBVCodeGen a -&gt; SBVCodeGen b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: a -&gt; SBVCodeGen b -&gt; SBVCodeGen a
$c&lt;$ :: forall a b. a -&gt; SBVCodeGen b -&gt; SBVCodeGen a
fmap :: (a -&gt; b) -&gt; SBVCodeGen a -&gt; SBVCodeGen b
$cfmap :: forall a b. (a -&gt; b) -&gt; SBVCodeGen a -&gt; SBVCodeGen b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154087"><span id="local-6989586621681154089"><span id="local-6989586621681154091"><span class="annot"><span class="annottext">Applicative SBVCodeGen
a -&gt; SBVCodeGen a
Applicative SBVCodeGen =&gt;
(forall a b. SBVCodeGen a -&gt; (a -&gt; SBVCodeGen b) -&gt; SBVCodeGen b)
-&gt; (forall a b. SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen b)
-&gt; (forall a. a -&gt; SBVCodeGen a)
-&gt; Monad SBVCodeGen
SBVCodeGen a -&gt; (a -&gt; SBVCodeGen b) -&gt; SBVCodeGen b
SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen b
forall a. a -&gt; SBVCodeGen a
forall a b. SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen b
forall a b. SBVCodeGen a -&gt; (a -&gt; SBVCodeGen b) -&gt; SBVCodeGen b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: a -&gt; SBVCodeGen a
$creturn :: forall a. a -&gt; SBVCodeGen a
&gt;&gt; :: SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen b
$c&gt;&gt; :: forall a b. SBVCodeGen a -&gt; SBVCodeGen b -&gt; SBVCodeGen b
&gt;&gt;= :: SBVCodeGen a -&gt; (a -&gt; SBVCodeGen b) -&gt; SBVCodeGen b
$c&gt;&gt;= :: forall a b. SBVCodeGen a -&gt; (a -&gt; SBVCodeGen b) -&gt; SBVCodeGen b
$cp1Monad :: Applicative SBVCodeGen
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154083"><span class="annot"><span class="annottext">Monad SBVCodeGen
Monad SBVCodeGen =&gt;
(forall a. IO a -&gt; SBVCodeGen a) -&gt; MonadIO SBVCodeGen
IO a -&gt; SBVCodeGen a
forall a. IO a -&gt; SBVCodeGen a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
liftIO :: IO a -&gt; SBVCodeGen a
$cliftIO :: forall a. IO a -&gt; SBVCodeGen a
$cp1MonadIO :: Monad SBVCodeGen
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154075"><span id="local-6989586621681154077"><span id="local-6989586621681154079"><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgState"><span class="hs-identifier hs-type">CgState</span></a></span></span></span></span><span>
</span><span id="line-127"></span><span>                            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154071"><span class="annot"><span class="annottext">MonadIO SBVCodeGen
SBVCodeGen State
MonadIO SBVCodeGen =&gt; SBVCodeGen State -&gt; MonadSymbolic SBVCodeGen
forall (m :: * -&gt; *). MonadIO m =&gt; m State -&gt; MonadSymbolic m
symbolicEnv :: SBVCodeGen State
$csymbolicEnv :: SBVCodeGen State
$cp1MonadSymbolic :: MonadIO SBVCodeGen
</span><a href="Data.SBV.Core.Symbolic.html#C%3AMonadSymbolic"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadSymbolic</span></a></span></span><span class="hs-cpp">
#if MIN_VERSION_base(4,11,0)
</span><span>                            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154067"><span class="annot"><span class="annottext">Monad SBVCodeGen
Monad SBVCodeGen =&gt;
(forall a. String -&gt; SBVCodeGen a) -&gt; MonadFail SBVCodeGen
String -&gt; SBVCodeGen a
forall a. String -&gt; SBVCodeGen a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. String -&gt; m a) -&gt; MonadFail m
fail :: String -&gt; SBVCodeGen a
$cfail :: forall a. String -&gt; SBVCodeGen a
$cp1MonadFail :: Monad SBVCodeGen
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Fail.MonadFail</span></span></span><span class="hs-cpp">
#endif
</span><span>                            </span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">-- | Reach into symbolic monad from code-generation</span><span>
</span><span id="line-134"></span><span id="local-6989586621681154065"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgSym"><span class="hs-identifier hs-type">cgSym</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#Symbolic"><span class="hs-identifier hs-type">Symbolic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681154065"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681154065"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-135"></span><span id="cgSym"><span class="annot"><span class="annottext">cgSym :: Symbolic a -&gt; SBVCodeGen a
</span><a href="Data.SBV.Compilers.CodeGen.html#cgSym"><span class="hs-identifier hs-var hs-var">cgSym</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StateT CgState Symbolic a -&gt; SBVCodeGen a
forall a. StateT CgState Symbolic a -&gt; SBVCodeGen a
</span><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-var">SBVCodeGen</span></a></span><span> </span><span class="annot"><span class="annottext">(StateT CgState Symbolic a -&gt; SBVCodeGen a)
-&gt; (Symbolic a -&gt; StateT CgState Symbolic a)
-&gt; Symbolic a
-&gt; SBVCodeGen a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Symbolic a -&gt; StateT CgState Symbolic a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- | Sets RTC (run-time-checks) for index-out-of-bounds, shift-with-large value etc. on/off. Default: 'False'.</span><span>
</span><span id="line-138"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgPerformRTCs"><span class="hs-identifier hs-type">cgPerformRTCs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span id="cgPerformRTCs"><span class="annot"><span class="annottext">cgPerformRTCs :: Bool -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgPerformRTCs"><span class="hs-identifier hs-var hs-var">cgPerformRTCs</span></a></span></span><span> </span><span id="local-6989586621681154063"><span class="annot"><span class="annottext">b :: Bool
</span><a href="#local-6989586621681154063"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154062"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154062"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154062"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgFinalConfig :: CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var">cgFinalConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var hs-var">cgFinalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154062"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgRTC :: Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgRTC"><span class="hs-identifier hs-var">cgRTC</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154063"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-comment">-- | Sets number of bits to be used for representing the 'SInteger' type in the generated C code.</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- The argument must be one of @8@, @16@, @32@, or @64@. Note that this is essentially unsafe as</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- the semantics of unbounded Haskell integers becomes reduced to the corresponding bit size, as</span><span>
</span><span id="line-144"></span><span class="hs-comment">-- typical in most C implementations.</span><span>
</span><span id="line-145"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgIntegerSize"><span class="hs-identifier hs-type">cgIntegerSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span id="cgIntegerSize"><span class="annot"><span class="annottext">cgIntegerSize :: Int -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgIntegerSize"><span class="hs-identifier hs-var hs-var">cgIntegerSize</span></a></span></span><span> </span><span id="local-6989586621681154061"><span class="annot"><span class="annottext">i :: Int
</span><a href="#local-6989586621681154061"><span class="hs-identifier hs-var">i</span></a></span></span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154061"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Int] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`notElem`</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-number">8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-number">16</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-number">32</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-number">64</span></span><span class="hs-special">]</span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SBVCodeGen ()
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SBVCodeGen ()) -&gt; String -&gt; SBVCodeGen ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;SBV.cgIntegerSize: Argument must be one of 8, 16, 32, or 64. Received: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154061"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154057"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154057"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154057"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgFinalConfig :: CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var">cgFinalConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var hs-var">cgFinalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154057"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgInteger :: Maybe Int
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInteger"><span class="hs-identifier hs-var">cgInteger</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154061"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-comment">-- | Possible mappings for the 'SReal' type when translated to C. Used in conjunction</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- with the function 'cgSRealType'. Note that the particular characteristics of the</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- mapped types depend on the platform and the compiler used for compiling the generated</span><span>
</span><span id="line-155"></span><span class="hs-comment">-- C program. See &lt;http://en.wikipedia.org/wiki/C_data_types&gt; for details.</span><span>
</span><span id="line-156"></span><span class="hs-keyword">data</span><span> </span><span id="CgSRealType"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgSRealType"><span class="hs-identifier hs-var">CgSRealType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CgFloat"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgFloat"><span class="hs-identifier hs-var">CgFloat</span></a></span></span><span>      </span><span class="hs-comment">-- ^ @float@</span><span>
</span><span id="line-157"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span id="CgDouble"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgDouble"><span class="hs-identifier hs-var">CgDouble</span></a></span></span><span>     </span><span class="hs-comment">-- ^ @double@</span><span>
</span><span id="line-158"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span id="CgLongDouble"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgLongDouble"><span class="hs-identifier hs-var">CgLongDouble</span></a></span></span><span> </span><span class="hs-comment">-- ^ @long double@</span><span>
</span><span id="line-159"></span><span>                 </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681154050"><span id="local-6989586621681154052"><span class="annot"><span class="annottext">CgSRealType -&gt; CgSRealType -&gt; Bool
(CgSRealType -&gt; CgSRealType -&gt; Bool)
-&gt; (CgSRealType -&gt; CgSRealType -&gt; Bool) -&gt; Eq CgSRealType
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: CgSRealType -&gt; CgSRealType -&gt; Bool
$c/= :: CgSRealType -&gt; CgSRealType -&gt; Bool
== :: CgSRealType -&gt; CgSRealType -&gt; Bool
$c== :: CgSRealType -&gt; CgSRealType -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="hs-comment">-- 'Show' instance for 'cgSRealType' displays values as they would be used in a C program</span><span>
</span><span id="line-162"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681154044"><span id="local-6989586621681154047"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgSRealType"><span class="hs-identifier hs-type">CgSRealType</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-163"></span><span>  </span><span id="local-6989586621681154042"><span class="annot"><span class="annottext">show :: CgSRealType -&gt; String
</span><a href="#local-6989586621681154042"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgFloat"><span class="hs-identifier hs-type">CgFloat</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;float&quot;</span></span><span>
</span><span id="line-164"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgDouble"><span class="hs-identifier hs-type">CgDouble</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;double&quot;</span></span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgLongDouble"><span class="hs-identifier hs-type">CgLongDouble</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;long double&quot;</span></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="hs-comment">-- | Sets the C type to be used for representing the 'SReal' type in the generated C code.</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- The setting can be one of C's @&quot;float&quot;@, @&quot;double&quot;@, or @&quot;long double&quot;@, types, depending</span><span>
</span><span id="line-169"></span><span class="hs-comment">-- on the precision needed. Note that this is essentially unsafe as the semantics of</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- infinite precision SReal values becomes reduced to the corresponding floating point type in</span><span>
</span><span id="line-171"></span><span class="hs-comment">-- C, and hence it is subject to rounding errors.</span><span>
</span><span id="line-172"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgSRealType"><span class="hs-identifier hs-type">cgSRealType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgSRealType"><span class="hs-identifier hs-type">CgSRealType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span id="cgSRealType"><span class="annot"><span class="annottext">cgSRealType :: CgSRealType -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgSRealType"><span class="hs-identifier hs-var hs-var">cgSRealType</span></a></span></span><span> </span><span id="local-6989586621681154041"><span class="annot"><span class="annottext">rt :: CgSRealType
</span><a href="#local-6989586621681154041"><span class="hs-identifier hs-var">rt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154040"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154040"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154040"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cgFinalConfig :: CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var">cgFinalConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var hs-var">cgFinalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154040"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgReal :: Maybe CgSRealType
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReal"><span class="hs-identifier hs-var">cgReal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CgSRealType -&gt; Maybe CgSRealType
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">CgSRealType
</span><a href="#local-6989586621681154041"><span class="hs-identifier hs-var">rt</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="hs-comment">-- | Should we generate a driver program? Default: 'True'. When a library is generated, it will have</span><span>
</span><span id="line-176"></span><span class="hs-comment">-- a driver if any of the contituent functions has a driver. (See 'Data.SBV.Tools.CodeGen.compileToCLib'.)</span><span>
</span><span id="line-177"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgGenerateDriver"><span class="hs-identifier hs-type">cgGenerateDriver</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span id="cgGenerateDriver"><span class="annot"><span class="annottext">cgGenerateDriver :: Bool -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgGenerateDriver"><span class="hs-identifier hs-var hs-var">cgGenerateDriver</span></a></span></span><span> </span><span id="local-6989586621681154039"><span class="annot"><span class="annottext">b :: Bool
</span><a href="#local-6989586621681154039"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154038"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154038"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154038"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgFinalConfig :: CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var">cgFinalConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var hs-var">cgFinalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154038"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgGenDriver :: Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgGenDriver"><span class="hs-identifier hs-var">cgGenDriver</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154039"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-comment">-- | Should we generate a Makefile? Default: 'True'.</span><span>
</span><span id="line-181"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgGenerateMakefile"><span class="hs-identifier hs-type">cgGenerateMakefile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span id="cgGenerateMakefile"><span class="annot"><span class="annottext">cgGenerateMakefile :: Bool -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgGenerateMakefile"><span class="hs-identifier hs-var hs-var">cgGenerateMakefile</span></a></span></span><span> </span><span id="local-6989586621681154037"><span class="annot"><span class="annottext">b :: Bool
</span><a href="#local-6989586621681154037"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154036"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154036"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154036"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgFinalConfig :: CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var">cgFinalConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var hs-var">cgFinalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154036"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgGenMakefile :: Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgGenMakefile"><span class="hs-identifier hs-var">cgGenMakefile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154037"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-comment">-- | Sets driver program run time values, useful for generating programs with fixed drivers for testing. Default: None, i.e., use random values.</span><span>
</span><span id="line-185"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgSetDriverValues"><span class="hs-identifier hs-type">cgSetDriverValues</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span id="cgSetDriverValues"><span class="annot"><span class="annottext">cgSetDriverValues :: [Integer] -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgSetDriverValues"><span class="hs-identifier hs-var hs-var">cgSetDriverValues</span></a></span></span><span> </span><span id="local-6989586621681154035"><span class="annot"><span class="annottext">vs :: [Integer]
</span><a href="#local-6989586621681154035"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154034"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154034"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154034"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgFinalConfig :: CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var">cgFinalConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var hs-var">cgFinalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154034"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgDriverVals :: [Integer]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgDriverVals"><span class="hs-identifier hs-var">cgDriverVals</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Integer]
</span><a href="#local-6989586621681154035"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="hs-comment">-- | Ignore assertions (those generated by 'Data.SBV.sAssert' calls) in the generated C code</span><span>
</span><span id="line-189"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgIgnoreSAssert"><span class="hs-identifier hs-type">cgIgnoreSAssert</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span id="cgIgnoreSAssert"><span class="annot"><span class="annottext">cgIgnoreSAssert :: Bool -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgIgnoreSAssert"><span class="hs-identifier hs-var hs-var">cgIgnoreSAssert</span></a></span></span><span> </span><span id="local-6989586621681154033"><span class="annot"><span class="annottext">b :: Bool
</span><a href="#local-6989586621681154033"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154032"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154032"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154032"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgFinalConfig :: CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var">cgFinalConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var hs-var">cgFinalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154032"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgIgnoreAsserts :: Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgIgnoreAsserts"><span class="hs-identifier hs-var">cgIgnoreAsserts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154033"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-comment">-- | Adds the given lines to the header file generated, useful for generating programs with uninterpreted functions.</span><span>
</span><span id="line-193"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgAddPrototype"><span class="hs-identifier hs-type">cgAddPrototype</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span id="cgAddPrototype"><span class="annot"><span class="annottext">cgAddPrototype :: [String] -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgAddPrototype"><span class="hs-identifier hs-var hs-var">cgAddPrototype</span></a></span></span><span> </span><span id="local-6989586621681154031"><span class="annot"><span class="annottext">ss :: [String]
</span><a href="#local-6989586621681154031"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154030"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154030"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154029"><span class="annot"><span class="annottext">old :: [String]
</span><a href="#local-6989586621681154029"><span class="hs-identifier hs-var hs-var">old</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [String]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgPrototypes"><span class="hs-identifier hs-var hs-var">cgPrototypes</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154030"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-195"></span><span>                                       </span><span id="local-6989586621681154028"><span class="annot"><span class="annottext">new :: [String]
</span><a href="#local-6989586621681154028"><span class="hs-identifier hs-var hs-var">new</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681154029"><span class="hs-identifier hs-var">old</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681154031"><span class="hs-identifier hs-var">ss</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681154029"><span class="hs-identifier hs-var">old</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681154031"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-196"></span><span>                                   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154030"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgPrototypes :: [String]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgPrototypes"><span class="hs-identifier hs-var">cgPrototypes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681154028"><span class="hs-identifier hs-var">new</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="hs-comment">-- | If passed 'True', then we will not ask the user if we're overwriting files as we generate</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- the C code. Otherwise, we'll prompt.</span><span>
</span><span id="line-200"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgOverwriteFiles"><span class="hs-identifier hs-type">cgOverwriteFiles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span id="cgOverwriteFiles"><span class="annot"><span class="annottext">cgOverwriteFiles :: Bool -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOverwriteFiles"><span class="hs-identifier hs-var hs-var">cgOverwriteFiles</span></a></span></span><span> </span><span id="local-6989586621681154026"><span class="annot"><span class="annottext">b :: Bool
</span><a href="#local-6989586621681154026"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154025"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154025"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154025"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgFinalConfig :: CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var">cgFinalConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var hs-var">cgFinalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154025"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgOverwriteGenerated :: Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOverwriteGenerated"><span class="hs-identifier hs-var">cgOverwriteGenerated</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154026"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="hs-comment">-- | If passed 'True', then we will show 'SWord 8' type in hex. Otherwise we'll show it in decimal. All signed</span><span>
</span><span id="line-204"></span><span class="hs-comment">-- types are shown decimal, and all unsigned larger types are shown hexadecimal otherwise.</span><span>
</span><span id="line-205"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgShowU8UsingHex"><span class="hs-identifier hs-type">cgShowU8UsingHex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span id="cgShowU8UsingHex"><span class="annot"><span class="annottext">cgShowU8UsingHex :: Bool -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgShowU8UsingHex"><span class="hs-identifier hs-var hs-var">cgShowU8UsingHex</span></a></span></span><span> </span><span id="local-6989586621681154024"><span class="annot"><span class="annottext">b :: Bool
</span><a href="#local-6989586621681154024"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154023"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154023"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154023"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgFinalConfig :: CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var">cgFinalConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var hs-var">cgFinalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154023"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgShowU8InHex :: Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgShowU8InHex"><span class="hs-identifier hs-var">cgShowU8InHex</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154024"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-comment">-- | Adds the given lines to the program file generated, useful for generating programs with uninterpreted functions.</span><span>
</span><span id="line-210"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgAddDecl"><span class="hs-identifier hs-type">cgAddDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span id="cgAddDecl"><span class="annot"><span class="annottext">cgAddDecl :: [String] -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgAddDecl"><span class="hs-identifier hs-var hs-var">cgAddDecl</span></a></span></span><span> </span><span id="local-6989586621681154022"><span class="annot"><span class="annottext">ss :: [String]
</span><a href="#local-6989586621681154022"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154021"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154021"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154021"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgDecls :: [String]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgDecls"><span class="hs-identifier hs-var">cgDecls</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [String]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgDecls"><span class="hs-identifier hs-var hs-var">cgDecls</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154021"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681154022"><span class="hs-identifier hs-var">ss</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-comment">-- | Adds the given words to the compiler options in the generated Makefile, useful for linking extra stuff in.</span><span>
</span><span id="line-214"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgAddLDFlags"><span class="hs-identifier hs-type">cgAddLDFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span id="cgAddLDFlags"><span class="annot"><span class="annottext">cgAddLDFlags :: [String] -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgAddLDFlags"><span class="hs-identifier hs-var hs-var">cgAddLDFlags</span></a></span></span><span> </span><span id="local-6989586621681154020"><span class="annot"><span class="annottext">ss :: [String]
</span><a href="#local-6989586621681154020"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154019"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154019"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154019"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgLDFlags :: [String]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgLDFlags"><span class="hs-identifier hs-var">cgLDFlags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [String]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgLDFlags"><span class="hs-identifier hs-var hs-var">cgLDFlags</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154019"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681154020"><span class="hs-identifier hs-var">ss</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-comment">-- | Creates an atomic input in the generated code.</span><span>
</span><span id="line-218"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#svCgInput"><span class="hs-identifier hs-type">svCgInput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Core.Kind.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span>
</span><span id="line-219"></span><span id="svCgInput"><span class="annot"><span class="annottext">svCgInput :: Kind -&gt; String -&gt; SBVCodeGen SVal
</span><a href="Data.SBV.Compilers.CodeGen.html#svCgInput"><span class="hs-identifier hs-var hs-var">svCgInput</span></a></span></span><span> </span><span id="local-6989586621681154018"><span class="annot"><span class="annottext">k :: Kind
</span><a href="#local-6989586621681154018"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681154017"><span class="annot"><span class="annottext">nm :: String
</span><a href="#local-6989586621681154017"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681154016"><span class="annot"><span class="annottext">SVal
</span><a href="#local-6989586621681154016"><span class="hs-identifier hs-var">r</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SBVCodeGen State
forall (m :: * -&gt; *). MonadSymbolic m =&gt; m State
</span><a href="Data.SBV.Core.Symbolic.html#symbolicEnv"><span class="hs-identifier hs-var">symbolicEnv</span></a></span><span> </span><span class="annot"><span class="annottext">SBVCodeGen State -&gt; (State -&gt; SBVCodeGen SVal) -&gt; SBVCodeGen SVal
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">IO SVal -&gt; SBVCodeGen SVal
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO SVal -&gt; SBVCodeGen SVal)
-&gt; (State -&gt; IO SVal) -&gt; State -&gt; SBVCodeGen SVal
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Maybe Quantifier -&gt; Kind -&gt; Maybe String -&gt; State -&gt; IO SVal
</span><a href="Data.SBV.Core.Symbolic.html#svMkSymVar"><span class="hs-identifier hs-var">svMkSymVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Quantifier -&gt; Maybe Quantifier
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Quantifier
</span><a href="Data.SBV.Core.Symbolic.html#ALL"><span class="hs-identifier hs-var">ALL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681154018"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-220"></span><span>                    </span><span id="local-6989586621681154013"><span class="annot"><span class="annottext">SV
</span><a href="#local-6989586621681154013"><span class="hs-identifier hs-var">sv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SVal -&gt; SBVCodeGen SV
forall (m :: * -&gt; *). MonadSymbolic m =&gt; SVal -&gt; m SV
</span><a href="Data.SBV.Core.Symbolic.html#svToSymSV"><span class="hs-identifier hs-var">svToSymSV</span></a></span><span> </span><span class="annot"><span class="annottext">SVal
</span><a href="#local-6989586621681154016"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-221"></span><span>                    </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154012"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154012"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154012"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgInputs :: [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var">cgInputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154017"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SV -&gt; CgVal
</span><a href="Data.SBV.Compilers.CodeGen.html#CgAtomic"><span class="hs-identifier hs-var">CgAtomic</span></a></span><span> </span><span class="annot"><span class="annottext">SV
</span><a href="#local-6989586621681154013"><span class="hs-identifier hs-var">sv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String, CgVal) -&gt; [(String, CgVal)] -&gt; [(String, CgVal)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var hs-var">cgInputs</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154012"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>                    </span><span class="annot"><span class="annottext">SVal -&gt; SBVCodeGen SVal
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">SVal
</span><a href="#local-6989586621681154016"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="hs-comment">-- | Creates an array input in the generated code.</span><span>
</span><span id="line-225"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#svCgInputArr"><span class="hs-identifier hs-type">svCgInputArr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Core.Kind.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-226"></span><span id="svCgInputArr"><span class="annot"><span class="annottext">svCgInputArr :: Kind -&gt; Int -&gt; String -&gt; SBVCodeGen [SVal]
</span><a href="Data.SBV.Compilers.CodeGen.html#svCgInputArr"><span class="hs-identifier hs-var hs-var">svCgInputArr</span></a></span></span><span> </span><span id="local-6989586621681154011"><span class="annot"><span class="annottext">k :: Kind
</span><a href="#local-6989586621681154011"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681154010"><span class="annot"><span class="annottext">sz :: Int
</span><a href="#local-6989586621681154010"><span class="hs-identifier hs-var">sz</span></a></span></span><span> </span><span id="local-6989586621681154009"><span class="annot"><span class="annottext">nm :: String
</span><a href="#local-6989586621681154009"><span class="hs-identifier hs-var">nm</span></a></span></span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154010"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SBVCodeGen [SVal]
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SBVCodeGen [SVal]) -&gt; String -&gt; SBVCodeGen [SVal]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;SBV.cgInputArr: Array inputs must have at least one element, given &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154010"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot; for &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154009"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681154007"><span class="annot"><span class="annottext">[SVal]
</span><a href="#local-6989586621681154007"><span class="hs-identifier hs-var">rs</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SBVCodeGen State
forall (m :: * -&gt; *). MonadSymbolic m =&gt; m State
</span><a href="Data.SBV.Core.Symbolic.html#symbolicEnv"><span class="hs-identifier hs-var">symbolicEnv</span></a></span><span> </span><span class="annot"><span class="annottext">SBVCodeGen State
-&gt; (State -&gt; SBVCodeGen [SVal]) -&gt; SBVCodeGen [SVal]
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">IO [SVal] -&gt; SBVCodeGen [SVal]
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO [SVal] -&gt; SBVCodeGen [SVal])
-&gt; (State -&gt; IO [SVal]) -&gt; State -&gt; SBVCodeGen [SVal]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO SVal -&gt; IO [SVal]
forall (m :: * -&gt; *) a. Applicative m =&gt; Int -&gt; m a -&gt; m [a]
</span><span class="hs-identifier hs-var">replicateM</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154010"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">(IO SVal -&gt; IO [SVal]) -&gt; (State -&gt; IO SVal) -&gt; State -&gt; IO [SVal]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Maybe Quantifier -&gt; Kind -&gt; Maybe String -&gt; State -&gt; IO SVal
</span><a href="Data.SBV.Core.Symbolic.html#svMkSymVar"><span class="hs-identifier hs-var">svMkSymVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Quantifier -&gt; Maybe Quantifier
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Quantifier
</span><a href="Data.SBV.Core.Symbolic.html#ALL"><span class="hs-identifier hs-var">ALL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681154011"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-229"></span><span>                </span><span id="local-6989586621681154006"><span class="annot"><span class="annottext">[SV]
</span><a href="#local-6989586621681154006"><span class="hs-identifier hs-var">sws</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SVal -&gt; SBVCodeGen SV) -&gt; [SVal] -&gt; SBVCodeGen [SV]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">SVal -&gt; SBVCodeGen SV
forall (m :: * -&gt; *). MonadSymbolic m =&gt; SVal -&gt; m SV
</span><a href="Data.SBV.Core.Symbolic.html#svToSymSV"><span class="hs-identifier hs-var">svToSymSV</span></a></span><span> </span><span class="annot"><span class="annottext">[SVal]
</span><a href="#local-6989586621681154007"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-230"></span><span>                </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154004"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154004"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154004"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgInputs :: [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var">cgInputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154009"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SV] -&gt; CgVal
</span><a href="Data.SBV.Compilers.CodeGen.html#CgArray"><span class="hs-identifier hs-var">CgArray</span></a></span><span> </span><span class="annot"><span class="annottext">[SV]
</span><a href="#local-6989586621681154006"><span class="hs-identifier hs-var">sws</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String, CgVal) -&gt; [(String, CgVal)] -&gt; [(String, CgVal)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var hs-var">cgInputs</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154004"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>                </span><span class="annot"><span class="annottext">[SVal] -&gt; SBVCodeGen [SVal]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[SVal]
</span><a href="#local-6989586621681154007"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-comment">-- | Creates an atomic output in the generated code.</span><span>
</span><span id="line-234"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#svCgOutput"><span class="hs-identifier hs-type">svCgOutput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span id="svCgOutput"><span class="annot"><span class="annottext">svCgOutput :: String -&gt; SVal -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#svCgOutput"><span class="hs-identifier hs-var hs-var">svCgOutput</span></a></span></span><span> </span><span id="local-6989586621681154003"><span class="annot"><span class="annottext">nm :: String
</span><a href="#local-6989586621681154003"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621681154002"><span class="annot"><span class="annottext">v :: SVal
</span><a href="#local-6989586621681154002"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SVal -&gt; SBVCodeGen ()
forall (m :: * -&gt; *). MonadSymbolic m =&gt; SVal -&gt; m ()
</span><a href="Data.SBV.Core.Symbolic.html#outputSVal"><span class="hs-identifier hs-var">outputSVal</span></a></span><span> </span><span class="annot"><span class="annottext">SVal
</span><a href="#local-6989586621681154002"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-236"></span><span>                     </span><span id="local-6989586621681154001"><span class="annot"><span class="annottext">SV
</span><a href="#local-6989586621681154001"><span class="hs-identifier hs-var">sv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SVal -&gt; SBVCodeGen SV
forall (m :: * -&gt; *). MonadSymbolic m =&gt; SVal -&gt; m SV
</span><a href="Data.SBV.Core.Symbolic.html#svToSymSV"><span class="hs-identifier hs-var">svToSymSV</span></a></span><span> </span><span class="annot"><span class="annottext">SVal
</span><a href="#local-6989586621681154002"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-237"></span><span>                     </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154000"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681154000"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154000"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgOutputs :: [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var">cgOutputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154003"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SV -&gt; CgVal
</span><a href="Data.SBV.Compilers.CodeGen.html#CgAtomic"><span class="hs-identifier hs-var">CgAtomic</span></a></span><span> </span><span class="annot"><span class="annottext">SV
</span><a href="#local-6989586621681154001"><span class="hs-identifier hs-var">sv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String, CgVal) -&gt; [(String, CgVal)] -&gt; [(String, CgVal)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var hs-var">cgOutputs</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681154000"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">-- | Creates an array output in the generated code.</span><span>
</span><span id="line-240"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#svCgOutputArr"><span class="hs-identifier hs-type">svCgOutputArr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span id="svCgOutputArr"><span class="annot"><span class="annottext">svCgOutputArr :: String -&gt; [SVal] -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#svCgOutputArr"><span class="hs-identifier hs-var hs-var">svCgOutputArr</span></a></span></span><span> </span><span id="local-6989586621681153999"><span class="annot"><span class="annottext">nm :: String
</span><a href="#local-6989586621681153999"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621681153998"><span class="annot"><span class="annottext">vs :: [SVal]
</span><a href="#local-6989586621681153998"><span class="hs-identifier hs-var">vs</span></a></span></span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153997"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SBVCodeGen ()
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SBVCodeGen ()) -&gt; String -&gt; SBVCodeGen ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;SBV.cgOutputArr: Array outputs must have at least one element, received &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153997"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot; for &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153999"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">(SVal -&gt; SBVCodeGen ()) -&gt; [SVal] -&gt; SBVCodeGen ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">SVal -&gt; SBVCodeGen ()
forall (m :: * -&gt; *). MonadSymbolic m =&gt; SVal -&gt; m ()
</span><a href="Data.SBV.Core.Symbolic.html#outputSVal"><span class="hs-identifier hs-var">outputSVal</span></a></span><span> </span><span class="annot"><span class="annottext">[SVal]
</span><a href="#local-6989586621681153998"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-244"></span><span>                </span><span id="local-6989586621681153995"><span class="annot"><span class="annottext">[SV]
</span><a href="#local-6989586621681153995"><span class="hs-identifier hs-var">sws</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SVal -&gt; SBVCodeGen SV) -&gt; [SVal] -&gt; SBVCodeGen [SV]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">SVal -&gt; SBVCodeGen SV
forall (m :: * -&gt; *). MonadSymbolic m =&gt; SVal -&gt; m SV
</span><a href="Data.SBV.Core.Symbolic.html#svToSymSV"><span class="hs-identifier hs-var">svToSymSV</span></a></span><span> </span><span class="annot"><span class="annottext">[SVal]
</span><a href="#local-6989586621681153998"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-245"></span><span>                </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681153994"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681153994"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153994"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgOutputs :: [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var">cgOutputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153999"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SV] -&gt; CgVal
</span><a href="Data.SBV.Compilers.CodeGen.html#CgArray"><span class="hs-identifier hs-var">CgArray</span></a></span><span> </span><span class="annot"><span class="annottext">[SV]
</span><a href="#local-6989586621681153995"><span class="hs-identifier hs-var">sws</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String, CgVal) -&gt; [(String, CgVal)] -&gt; [(String, CgVal)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var hs-var">cgOutputs</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153994"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681153997"><span class="annot"><span class="annottext">sz :: Int
</span><a href="#local-6989586621681153997"><span class="hs-identifier hs-var hs-var">sz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SVal] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[SVal]
</span><a href="#local-6989586621681153998"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-comment">-- | Creates a returned (unnamed) value in the generated code.</span><span>
</span><span id="line-249"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#svCgReturn"><span class="hs-identifier hs-type">svCgReturn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span id="svCgReturn"><span class="annot"><span class="annottext">svCgReturn :: SVal -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#svCgReturn"><span class="hs-identifier hs-var hs-var">svCgReturn</span></a></span></span><span> </span><span id="local-6989586621681153992"><span class="annot"><span class="annottext">v :: SVal
</span><a href="#local-6989586621681153992"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SVal -&gt; SBVCodeGen ()
forall (m :: * -&gt; *). MonadSymbolic m =&gt; SVal -&gt; m ()
</span><a href="Data.SBV.Core.Symbolic.html#outputSVal"><span class="hs-identifier hs-var">outputSVal</span></a></span><span> </span><span class="annot"><span class="annottext">SVal
</span><a href="#local-6989586621681153992"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-251"></span><span>                  </span><span id="local-6989586621681153991"><span class="annot"><span class="annottext">SV
</span><a href="#local-6989586621681153991"><span class="hs-identifier hs-var">sv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SVal -&gt; SBVCodeGen SV
forall (m :: * -&gt; *). MonadSymbolic m =&gt; SVal -&gt; m SV
</span><a href="Data.SBV.Core.Symbolic.html#svToSymSV"><span class="hs-identifier hs-var">svToSymSV</span></a></span><span> </span><span class="annot"><span class="annottext">SVal
</span><a href="#local-6989586621681153992"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-252"></span><span>                  </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681153990"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681153990"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153990"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgReturns :: [CgVal]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReturns"><span class="hs-identifier hs-var">cgReturns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SV -&gt; CgVal
</span><a href="Data.SBV.Compilers.CodeGen.html#CgAtomic"><span class="hs-identifier hs-var">CgAtomic</span></a></span><span> </span><span class="annot"><span class="annottext">SV
</span><a href="#local-6989586621681153991"><span class="hs-identifier hs-var">sv</span></a></span><span> </span><span class="annot"><span class="annottext">CgVal -&gt; [CgVal] -&gt; [CgVal]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [CgVal]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReturns"><span class="hs-identifier hs-var hs-var">cgReturns</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153990"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">-- | Creates a returned (unnamed) array value in the generated code.</span><span>
</span><span id="line-255"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#svCgReturnArr"><span class="hs-identifier hs-type">svCgReturnArr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.SBV.Core.Symbolic.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span id="svCgReturnArr"><span class="annot"><span class="annottext">svCgReturnArr :: [SVal] -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#svCgReturnArr"><span class="hs-identifier hs-var hs-var">svCgReturnArr</span></a></span></span><span> </span><span id="local-6989586621681153989"><span class="annot"><span class="annottext">vs :: [SVal]
</span><a href="#local-6989586621681153989"><span class="hs-identifier hs-var">vs</span></a></span></span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153988"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SBVCodeGen ()
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SBVCodeGen ()) -&gt; String -&gt; SBVCodeGen ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;SBV.cgReturnArr: Array returns must have at least one element, received &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153988"><span class="hs-identifier hs-var">sz</span></a></span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">(SVal -&gt; SBVCodeGen ()) -&gt; [SVal] -&gt; SBVCodeGen ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">SVal -&gt; SBVCodeGen ()
forall (m :: * -&gt; *). MonadSymbolic m =&gt; SVal -&gt; m ()
</span><a href="Data.SBV.Core.Symbolic.html#outputSVal"><span class="hs-identifier hs-var">outputSVal</span></a></span><span> </span><span class="annot"><span class="annottext">[SVal]
</span><a href="#local-6989586621681153989"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-259"></span><span>                </span><span id="local-6989586621681153987"><span class="annot"><span class="annottext">[SV]
</span><a href="#local-6989586621681153987"><span class="hs-identifier hs-var">sws</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SVal -&gt; SBVCodeGen SV) -&gt; [SVal] -&gt; SBVCodeGen [SV]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">SVal -&gt; SBVCodeGen SV
forall (m :: * -&gt; *). MonadSymbolic m =&gt; SVal -&gt; m SV
</span><a href="Data.SBV.Core.Symbolic.html#svToSymSV"><span class="hs-identifier hs-var">svToSymSV</span></a></span><span> </span><span class="annot"><span class="annottext">[SVal]
</span><a href="#local-6989586621681153989"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-260"></span><span>                </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681153986"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681153986"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153986"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgReturns :: [CgVal]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReturns"><span class="hs-identifier hs-var">cgReturns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SV] -&gt; CgVal
</span><a href="Data.SBV.Compilers.CodeGen.html#CgArray"><span class="hs-identifier hs-var">CgArray</span></a></span><span> </span><span class="annot"><span class="annottext">[SV]
</span><a href="#local-6989586621681153987"><span class="hs-identifier hs-var">sws</span></a></span><span> </span><span class="annot"><span class="annottext">CgVal -&gt; [CgVal] -&gt; [CgVal]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [CgVal]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReturns"><span class="hs-identifier hs-var hs-var">cgReturns</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153986"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681153988"><span class="annot"><span class="annottext">sz :: Int
</span><a href="#local-6989586621681153988"><span class="hs-identifier hs-var hs-var">sz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SVal] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[SVal]
</span><a href="#local-6989586621681153989"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="hs-comment">-- | Creates an atomic input in the generated code.</span><span>
</span><span id="line-264"></span><span id="local-6989586621681153985"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgInput"><span class="hs-identifier hs-type">cgInput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Core.Data.html#SymVal"><span class="hs-identifier hs-type">SymVal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681153985"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.SBV.Core.Data.html#SBV"><span class="hs-identifier hs-type">SBV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681153985"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-265"></span><span id="cgInput"><span class="annot"><span class="annottext">cgInput :: String -&gt; SBVCodeGen (SBV a)
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInput"><span class="hs-identifier hs-var hs-var">cgInput</span></a></span></span><span> </span><span id="local-6989586621681153984"><span class="annot"><span class="annottext">nm :: String
</span><a href="#local-6989586621681153984"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681153983"><span class="annot"><span class="annottext">SBV a
</span><a href="#local-6989586621681153983"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SBVCodeGen (SBV a)
forall a (m :: * -&gt; *). (SymVal a, MonadSymbolic m) =&gt; m (SBV a)
</span><a href="Data.SBV.Core.Data.html#forall_"><span class="hs-identifier hs-var">forall_</span></a></span><span>
</span><span id="line-266"></span><span>                </span><span id="local-6989586621681153981"><span class="annot"><span class="annottext">SV
</span><a href="#local-6989586621681153981"><span class="hs-identifier hs-var">sv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SBV a -&gt; SBVCodeGen SV
forall (m :: * -&gt; *) a. MonadSymbolic m =&gt; SBV a -&gt; m SV
</span><a href="Data.SBV.Core.Data.html#sbvToSymSV"><span class="hs-identifier hs-var">sbvToSymSV</span></a></span><span> </span><span class="annot"><span class="annottext">SBV a
</span><a href="#local-6989586621681153983"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-267"></span><span>                </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681153979"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681153979"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153979"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgInputs :: [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var">cgInputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153984"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SV -&gt; CgVal
</span><a href="Data.SBV.Compilers.CodeGen.html#CgAtomic"><span class="hs-identifier hs-var">CgAtomic</span></a></span><span> </span><span class="annot"><span class="annottext">SV
</span><a href="#local-6989586621681153981"><span class="hs-identifier hs-var">sv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String, CgVal) -&gt; [(String, CgVal)] -&gt; [(String, CgVal)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var hs-var">cgInputs</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153979"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>                </span><span class="annot"><span class="annottext">SBV a -&gt; SBVCodeGen (SBV a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">SBV a
</span><a href="#local-6989586621681153983"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-comment">-- | Creates an array input in the generated code.</span><span>
</span><span id="line-271"></span><span id="local-6989586621681153978"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgInputArr"><span class="hs-identifier hs-type">cgInputArr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Core.Data.html#SymVal"><span class="hs-identifier hs-type">SymVal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681153978"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.SBV.Core.Data.html#SBV"><span class="hs-identifier hs-type">SBV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681153978"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-272"></span><span id="cgInputArr"><span class="annot"><span class="annottext">cgInputArr :: Int -&gt; String -&gt; SBVCodeGen [SBV a]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputArr"><span class="hs-identifier hs-var hs-var">cgInputArr</span></a></span></span><span> </span><span id="local-6989586621681153977"><span class="annot"><span class="annottext">sz :: Int
</span><a href="#local-6989586621681153977"><span class="hs-identifier hs-var">sz</span></a></span></span><span> </span><span id="local-6989586621681153976"><span class="annot"><span class="annottext">nm :: String
</span><a href="#local-6989586621681153976"><span class="hs-identifier hs-var">nm</span></a></span></span><span>
</span><span id="line-273"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153977"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SBVCodeGen [SBV a]
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SBVCodeGen [SBV a]) -&gt; String -&gt; SBVCodeGen [SBV a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;SBV.cgInputArr: Array inputs must have at least one element, given &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153977"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot; for &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153976"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681153975"><span class="annot"><span class="annottext">[SBV a]
</span><a href="#local-6989586621681153975"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; SBVCodeGen (SBV a)) -&gt; [Int] -&gt; SBVCodeGen [SBV a]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SBVCodeGen (SBV a) -&gt; Int -&gt; SBVCodeGen (SBV a)
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">SBVCodeGen (SBV a)
forall a (m :: * -&gt; *). (SymVal a, MonadSymbolic m) =&gt; m (SBV a)
</span><a href="Data.SBV.Core.Data.html#forall_"><span class="hs-identifier hs-var">forall_</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-number">1</span></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153977"><span class="hs-identifier hs-var">sz</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-275"></span><span>                </span><span id="local-6989586621681153973"><span class="annot"><span class="annottext">[SV]
</span><a href="#local-6989586621681153973"><span class="hs-identifier hs-var">sws</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SBV a -&gt; SBVCodeGen SV) -&gt; [SBV a] -&gt; SBVCodeGen [SV]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">SBV a -&gt; SBVCodeGen SV
forall (m :: * -&gt; *) a. MonadSymbolic m =&gt; SBV a -&gt; m SV
</span><a href="Data.SBV.Core.Data.html#sbvToSymSV"><span class="hs-identifier hs-var">sbvToSymSV</span></a></span><span> </span><span class="annot"><span class="annottext">[SBV a]
</span><a href="#local-6989586621681153975"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-276"></span><span>                </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681153972"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681153972"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153972"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgInputs :: [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var">cgInputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153976"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SV] -&gt; CgVal
</span><a href="Data.SBV.Compilers.CodeGen.html#CgArray"><span class="hs-identifier hs-var">CgArray</span></a></span><span> </span><span class="annot"><span class="annottext">[SV]
</span><a href="#local-6989586621681153973"><span class="hs-identifier hs-var">sws</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String, CgVal) -&gt; [(String, CgVal)] -&gt; [(String, CgVal)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var hs-var">cgInputs</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153972"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>                </span><span class="annot"><span class="annottext">[SBV a] -&gt; SBVCodeGen [SBV a]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[SBV a]
</span><a href="#local-6989586621681153975"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span class="hs-comment">-- | Creates an atomic output in the generated code.</span><span>
</span><span id="line-280"></span><span id="local-6989586621681153971"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgOutput"><span class="hs-identifier hs-type">cgOutput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Core.Data.html#SBV"><span class="hs-identifier hs-type">SBV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681153971"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-281"></span><span id="cgOutput"><span class="annot"><span class="annottext">cgOutput :: String -&gt; SBV a -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutput"><span class="hs-identifier hs-var hs-var">cgOutput</span></a></span></span><span> </span><span id="local-6989586621681153970"><span class="annot"><span class="annottext">nm :: String
</span><a href="#local-6989586621681153970"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621681153969"><span class="annot"><span class="annottext">v :: SBV a
</span><a href="#local-6989586621681153969"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">SBV a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SBV a -&gt; SBVCodeGen (SBV a)
forall a (m :: * -&gt; *).
(Outputtable a, MonadSymbolic m) =&gt;
a -&gt; m a
</span><a href="Data.SBV.Core.Data.html#output"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">SBV a
</span><a href="#local-6989586621681153969"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-282"></span><span>                   </span><span id="local-6989586621681153967"><span class="annot"><span class="annottext">SV
</span><a href="#local-6989586621681153967"><span class="hs-identifier hs-var">sv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SBV a -&gt; SBVCodeGen SV
forall (m :: * -&gt; *) a. MonadSymbolic m =&gt; SBV a -&gt; m SV
</span><a href="Data.SBV.Core.Data.html#sbvToSymSV"><span class="hs-identifier hs-var">sbvToSymSV</span></a></span><span> </span><span class="annot"><span class="annottext">SBV a
</span><a href="#local-6989586621681153969"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-283"></span><span>                   </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681153966"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681153966"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153966"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgOutputs :: [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var">cgOutputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153970"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SV -&gt; CgVal
</span><a href="Data.SBV.Compilers.CodeGen.html#CgAtomic"><span class="hs-identifier hs-var">CgAtomic</span></a></span><span> </span><span class="annot"><span class="annottext">SV
</span><a href="#local-6989586621681153967"><span class="hs-identifier hs-var">sv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String, CgVal) -&gt; [(String, CgVal)] -&gt; [(String, CgVal)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var hs-var">cgOutputs</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153966"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="hs-comment">-- | Creates an array output in the generated code.</span><span>
</span><span id="line-286"></span><span id="local-6989586621681153965"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgOutputArr"><span class="hs-identifier hs-type">cgOutputArr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Core.Data.html#SymVal"><span class="hs-identifier hs-type">SymVal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681153965"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.SBV.Core.Data.html#SBV"><span class="hs-identifier hs-type">SBV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681153965"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-287"></span><span id="cgOutputArr"><span class="annot"><span class="annottext">cgOutputArr :: String -&gt; [SBV a] -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputArr"><span class="hs-identifier hs-var hs-var">cgOutputArr</span></a></span></span><span> </span><span id="local-6989586621681153964"><span class="annot"><span class="annottext">nm :: String
</span><a href="#local-6989586621681153964"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621681153963"><span class="annot"><span class="annottext">vs :: [SBV a]
</span><a href="#local-6989586621681153963"><span class="hs-identifier hs-var">vs</span></a></span></span><span>
</span><span id="line-288"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153962"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SBVCodeGen ()
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SBVCodeGen ()) -&gt; String -&gt; SBVCodeGen ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;SBV.cgOutputArr: Array outputs must have at least one element, received &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153962"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot; for &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153964"><span class="hs-identifier hs-var">nm</span></a></span><span>
</span><span id="line-289"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">(SBV a -&gt; SBVCodeGen (SBV a)) -&gt; [SBV a] -&gt; SBVCodeGen ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">SBV a -&gt; SBVCodeGen (SBV a)
forall a (m :: * -&gt; *).
(Outputtable a, MonadSymbolic m) =&gt;
a -&gt; m a
</span><a href="Data.SBV.Core.Data.html#output"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">[SBV a]
</span><a href="#local-6989586621681153963"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-290"></span><span>                </span><span id="local-6989586621681153961"><span class="annot"><span class="annottext">[SV]
</span><a href="#local-6989586621681153961"><span class="hs-identifier hs-var">sws</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SBV a -&gt; SBVCodeGen SV) -&gt; [SBV a] -&gt; SBVCodeGen [SV]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">SBV a -&gt; SBVCodeGen SV
forall (m :: * -&gt; *) a. MonadSymbolic m =&gt; SBV a -&gt; m SV
</span><a href="Data.SBV.Core.Data.html#sbvToSymSV"><span class="hs-identifier hs-var">sbvToSymSV</span></a></span><span> </span><span class="annot"><span class="annottext">[SBV a]
</span><a href="#local-6989586621681153963"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-291"></span><span>                </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681153960"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681153960"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153960"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgOutputs :: [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var">cgOutputs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153964"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SV] -&gt; CgVal
</span><a href="Data.SBV.Compilers.CodeGen.html#CgArray"><span class="hs-identifier hs-var">CgArray</span></a></span><span> </span><span class="annot"><span class="annottext">[SV]
</span><a href="#local-6989586621681153961"><span class="hs-identifier hs-var">sws</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String, CgVal) -&gt; [(String, CgVal)] -&gt; [(String, CgVal)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var hs-var">cgOutputs</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153960"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681153962"><span class="annot"><span class="annottext">sz :: Int
</span><a href="#local-6989586621681153962"><span class="hs-identifier hs-var hs-var">sz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SBV a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[SBV a]
</span><a href="#local-6989586621681153963"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span class="hs-comment">-- | Creates a returned (unnamed) value in the generated code.</span><span>
</span><span id="line-295"></span><span id="local-6989586621681153959"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgReturn"><span class="hs-identifier hs-type">cgReturn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Core.Data.html#SBV"><span class="hs-identifier hs-type">SBV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681153959"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-296"></span><span id="cgReturn"><span class="annot"><span class="annottext">cgReturn :: SBV a -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReturn"><span class="hs-identifier hs-var hs-var">cgReturn</span></a></span></span><span> </span><span id="local-6989586621681153958"><span class="annot"><span class="annottext">v :: SBV a
</span><a href="#local-6989586621681153958"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">SBV a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SBV a -&gt; SBVCodeGen (SBV a)
forall a (m :: * -&gt; *).
(Outputtable a, MonadSymbolic m) =&gt;
a -&gt; m a
</span><a href="Data.SBV.Core.Data.html#output"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">SBV a
</span><a href="#local-6989586621681153958"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-297"></span><span>                </span><span id="local-6989586621681153957"><span class="annot"><span class="annottext">SV
</span><a href="#local-6989586621681153957"><span class="hs-identifier hs-var">sv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SBV a -&gt; SBVCodeGen SV
forall (m :: * -&gt; *) a. MonadSymbolic m =&gt; SBV a -&gt; m SV
</span><a href="Data.SBV.Core.Data.html#sbvToSymSV"><span class="hs-identifier hs-var">sbvToSymSV</span></a></span><span> </span><span class="annot"><span class="annottext">SBV a
</span><a href="#local-6989586621681153958"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-298"></span><span>                </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681153956"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681153956"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153956"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgReturns :: [CgVal]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReturns"><span class="hs-identifier hs-var">cgReturns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SV -&gt; CgVal
</span><a href="Data.SBV.Compilers.CodeGen.html#CgAtomic"><span class="hs-identifier hs-var">CgAtomic</span></a></span><span> </span><span class="annot"><span class="annottext">SV
</span><a href="#local-6989586621681153957"><span class="hs-identifier hs-var">sv</span></a></span><span> </span><span class="annot"><span class="annottext">CgVal -&gt; [CgVal] -&gt; [CgVal]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [CgVal]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReturns"><span class="hs-identifier hs-var hs-var">cgReturns</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153956"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span class="hs-comment">-- | Creates a returned (unnamed) array value in the generated code.</span><span>
</span><span id="line-301"></span><span id="local-6989586621681153955"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#cgReturnArr"><span class="hs-identifier hs-type">cgReturnArr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Core.Data.html#SymVal"><span class="hs-identifier hs-type">SymVal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681153955"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.SBV.Core.Data.html#SBV"><span class="hs-identifier hs-type">SBV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681153955"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-302"></span><span id="cgReturnArr"><span class="annot"><span class="annottext">cgReturnArr :: [SBV a] -&gt; SBVCodeGen ()
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReturnArr"><span class="hs-identifier hs-var hs-var">cgReturnArr</span></a></span></span><span> </span><span id="local-6989586621681153954"><span class="annot"><span class="annottext">vs :: [SBV a]
</span><a href="#local-6989586621681153954"><span class="hs-identifier hs-var">vs</span></a></span></span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153953"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SBVCodeGen ()
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SBVCodeGen ()) -&gt; String -&gt; SBVCodeGen ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;SBV.cgReturnArr: Array returns must have at least one element, received &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153953"><span class="hs-identifier hs-var">sz</span></a></span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">(SBV a -&gt; SBVCodeGen (SBV a)) -&gt; [SBV a] -&gt; SBVCodeGen ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">SBV a -&gt; SBVCodeGen (SBV a)
forall a (m :: * -&gt; *).
(Outputtable a, MonadSymbolic m) =&gt;
a -&gt; m a
</span><a href="Data.SBV.Core.Data.html#output"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">[SBV a]
</span><a href="#local-6989586621681153954"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-305"></span><span>                </span><span id="local-6989586621681153952"><span class="annot"><span class="annottext">[SV]
</span><a href="#local-6989586621681153952"><span class="hs-identifier hs-var">sws</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SBV a -&gt; SBVCodeGen SV) -&gt; [SBV a] -&gt; SBVCodeGen [SV]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">SBV a -&gt; SBVCodeGen SV
forall (m :: * -&gt; *) a. MonadSymbolic m =&gt; SBV a -&gt; m SV
</span><a href="Data.SBV.Core.Data.html#sbvToSymSV"><span class="hs-identifier hs-var">sbvToSymSV</span></a></span><span> </span><span class="annot"><span class="annottext">[SBV a]
</span><a href="#local-6989586621681153954"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-306"></span><span>                </span><span class="annot"><span class="annottext">(CgState -&gt; CgState) -&gt; SBVCodeGen ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681153951"><span class="annot"><span class="annottext">s :: CgState
</span><a href="#local-6989586621681153951"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153951"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgReturns :: [CgVal]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReturns"><span class="hs-identifier hs-var">cgReturns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SV] -&gt; CgVal
</span><a href="Data.SBV.Compilers.CodeGen.html#CgArray"><span class="hs-identifier hs-var">CgArray</span></a></span><span> </span><span class="annot"><span class="annottext">[SV]
</span><a href="#local-6989586621681153952"><span class="hs-identifier hs-var">sws</span></a></span><span> </span><span class="annot"><span class="annottext">CgVal -&gt; [CgVal] -&gt; [CgVal]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [CgVal]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgReturns"><span class="hs-identifier hs-var hs-var">cgReturns</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153951"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681153953"><span class="annot"><span class="annottext">sz :: Int
</span><a href="#local-6989586621681153953"><span class="hs-identifier hs-var hs-var">sz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SBV a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[SBV a]
</span><a href="#local-6989586621681153954"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-comment">-- | Representation of a collection of generated programs.</span><span>
</span><span id="line-310"></span><span class="hs-keyword">data</span><span> </span><span id="CgPgmBundle"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmBundle"><span class="hs-identifier hs-var">CgPgmBundle</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CgPgmBundle"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmBundle"><span class="hs-identifier hs-var">CgPgmBundle</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgSRealType"><span class="hs-identifier hs-type">CgSRealType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmKind"><span class="hs-identifier hs-type">CgPgmKind</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-comment">-- | Different kinds of &quot;files&quot; we can produce. Currently this is quite &quot;C&quot; specific.</span><span>
</span><span id="line-313"></span><span class="hs-keyword">data</span><span> </span><span id="CgPgmKind"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmKind"><span class="hs-identifier hs-var">CgPgmKind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CgMakefile"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgMakefile"><span class="hs-identifier hs-var">CgMakefile</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- list of flags to pass to linker</span><span>
</span><span id="line-314"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span id="CgHeader"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgHeader"><span class="hs-identifier hs-var">CgHeader</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span class="hs-special">]</span><span>
</span><span id="line-315"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span id="CgSource"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgSource"><span class="hs-identifier hs-var">CgSource</span></a></span></span><span>
</span><span id="line-316"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span id="CgDriver"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgDriver"><span class="hs-identifier hs-var">CgDriver</span></a></span></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="hs-comment">-- | Is this a driver program?</span><span>
</span><span id="line-319"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#isCgDriver"><span class="hs-identifier hs-type">isCgDriver</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmKind"><span class="hs-identifier hs-type">CgPgmKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-320"></span><span id="isCgDriver"><span class="annot"><span class="annottext">isCgDriver :: CgPgmKind -&gt; Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#isCgDriver"><span class="hs-identifier hs-var hs-var">isCgDriver</span></a></span></span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgDriver"><span class="hs-identifier hs-type">CgDriver</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-321"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#isCgDriver"><span class="hs-identifier hs-var">isCgDriver</span></a></span><span> </span><span class="hs-identifier">_</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-comment">-- | Is this a make file?</span><span>
</span><span id="line-324"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#isCgMakefile"><span class="hs-identifier hs-type">isCgMakefile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmKind"><span class="hs-identifier hs-type">CgPgmKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-325"></span><span id="isCgMakefile"><span class="annot"><span class="annottext">isCgMakefile :: CgPgmKind -&gt; Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#isCgMakefile"><span class="hs-identifier hs-var hs-var">isCgMakefile</span></a></span></span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgMakefile"><span class="hs-identifier hs-type">CgMakefile</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-326"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#isCgMakefile"><span class="hs-identifier hs-var">isCgMakefile</span></a></span><span> </span><span class="hs-identifier">_</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span class="hs-comment">-- A simple way to print bundles, mostly for debugging purposes.</span><span>
</span><span id="line-329"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681153940"><span id="local-6989586621681153943"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmBundle"><span class="hs-identifier hs-type">CgPgmBundle</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-330"></span><span>   </span><span id="local-6989586621681153939"><span class="annot"><span class="annottext">show :: CgPgmBundle -&gt; String
</span><a href="#local-6989586621681153939"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmBundle"><span class="hs-identifier hs-type">CgPgmBundle</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621681153938"><span class="annot"><span class="annottext">fs :: [(String, (CgPgmKind, [Doc]))]
</span><a href="#local-6989586621681153938"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">intercalate</span></span><span> </span><span class="annot"><span class="hs-string">&quot;\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String) -&gt; [String] -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((String, (CgPgmKind, [Doc])) -&gt; String)
-&gt; [(String, (CgPgmKind, [Doc]))] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(String, (CgPgmKind, [Doc])) -&gt; String
</span><a href="#local-6989586621681153937"><span class="hs-identifier hs-var">showFile</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, (CgPgmKind, [Doc]))]
</span><a href="#local-6989586621681153938"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-331"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span class="annot"><a href="#local-6989586621681153937"><span class="hs-identifier hs-type">showFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmKind"><span class="hs-identifier hs-type">CgPgmKind</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-332"></span><span>          </span><span id="local-6989586621681153937"><span class="annot"><span class="annottext">showFile :: (String, (CgPgmKind, [Doc])) -&gt; String
</span><a href="#local-6989586621681153937"><span class="hs-identifier hs-var hs-var">showFile</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681153936"><span class="annot"><span class="annottext">f :: String
</span><a href="#local-6989586621681153936"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681153935"><span class="annot"><span class="annottext">ds :: [Doc]
</span><a href="#local-6989586621681153935"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="hs-string">&quot;== BEGIN: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153936"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot; ================\n&quot;</span></span><span>
</span><span id="line-333"></span><span>                                </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; String
</span><a href="Data.SBV.Compilers.CodeGen.html#render%27"><span class="hs-identifier hs-var">render'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">vcat</span></span><span> </span><span class="annot"><span class="annottext">[Doc]
</span><a href="#local-6989586621681153935"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>                                </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot;== END: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153936"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot; ==================&quot;</span></span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="hs-comment">-- | Generate code for a symbolic program, returning a Code-gen bundle, i.e., collection</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- of makefiles, source code, headers, etc.</span><span>
</span><span id="line-338"></span><span id="local-6989586621681153932"><span id="local-6989586621681153933"><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#codeGen"><span class="hs-identifier hs-type">codeGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgTarget"><span class="hs-identifier hs-type">CgTarget</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681153933"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681153933"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgConfig"><span class="hs-identifier hs-type">CgConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681153932"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681153932"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgConfig"><span class="hs-identifier hs-type">CgConfig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmBundle"><span class="hs-identifier hs-type">CgPgmBundle</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-339"></span><span id="codeGen"><span class="annot"><span class="annottext">codeGen :: l
-&gt; CgConfig
-&gt; String
-&gt; SBVCodeGen a
-&gt; IO (a, CgConfig, CgPgmBundle)
</span><a href="Data.SBV.Compilers.CodeGen.html#codeGen"><span class="hs-identifier hs-var hs-var">codeGen</span></a></span></span><span> </span><span id="local-6989586621681153931"><span class="annot"><span class="annottext">l :: l
</span><a href="#local-6989586621681153931"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681153930"><span class="annot"><span class="annottext">cgConfig :: CgConfig
</span><a href="#local-6989586621681153930"><span class="hs-identifier hs-var">cgConfig</span></a></span></span><span> </span><span id="local-6989586621681153929"><span class="annot"><span class="annottext">nm :: String
</span><a href="#local-6989586621681153929"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#SBVCodeGen"><span class="hs-identifier hs-type">SBVCodeGen</span></a></span><span> </span><span id="local-6989586621681153928"><span class="annot"><span class="annottext">comp :: StateT CgState Symbolic a
</span><a href="#local-6989586621681153928"><span class="hs-identifier hs-var">comp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-340"></span><span>   </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681153927"><span class="annot"><span class="annottext">retVal :: a
</span><a href="#local-6989586621681153927"><span class="hs-identifier hs-var">retVal</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681153926"><span class="annot"><span class="annottext">st' :: CgState
</span><a href="#local-6989586621681153926"><span class="hs-identifier hs-var">st'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681153925"><span class="annot"><span class="annottext">res :: Result
</span><a href="#local-6989586621681153925"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SBVRunMode
-&gt; SymbolicT IO (a, CgState) -&gt; IO ((a, CgState), Result)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
SBVRunMode -&gt; SymbolicT m a -&gt; m (a, Result)
</span><a href="Data.SBV.Core.Symbolic.html#runSymbolic"><span class="hs-identifier hs-var">runSymbolic</span></a></span><span> </span><span class="annot"><span class="annottext">SBVRunMode
</span><a href="Data.SBV.Core.Symbolic.html#CodeGen"><span class="hs-identifier hs-var">CodeGen</span></a></span><span> </span><span class="annot"><span class="annottext">(SymbolicT IO (a, CgState) -&gt; IO ((a, CgState), Result))
-&gt; SymbolicT IO (a, CgState) -&gt; IO ((a, CgState), Result)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StateT CgState Symbolic a -&gt; CgState -&gt; SymbolicT IO (a, CgState)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var hs-var">runStateT</span></span><span> </span><span class="annot"><span class="annottext">StateT CgState Symbolic a
</span><a href="#local-6989586621681153928"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="Data.SBV.Compilers.CodeGen.html#initCgState"><span class="hs-identifier hs-var">initCgState</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgFinalConfig :: CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var">cgFinalConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CgConfig
</span><a href="#local-6989586621681153930"><span class="hs-identifier hs-var">cgConfig</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-341"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681153921"><span class="annot"><span class="annottext">st :: CgState
</span><a href="#local-6989586621681153921"><span class="hs-identifier hs-var hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153926"><span class="hs-identifier hs-var">st'</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgInputs :: [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var">cgInputs</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(String, CgVal)] -&gt; [(String, CgVal)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var hs-var">cgInputs</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153926"><span class="hs-identifier hs-var">st'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgOutputs :: [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var">cgOutputs</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(String, CgVal)] -&gt; [(String, CgVal)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var hs-var">cgOutputs</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153926"><span class="hs-identifier hs-var">st'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-344"></span><span>       </span><span id="local-6989586621681153919"><span class="annot"><span class="annottext">allNamedVars :: [String]
</span><a href="#local-6989586621681153919"><span class="hs-identifier hs-var hs-var">allNamedVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((String, CgVal) -&gt; String) -&gt; [(String, CgVal)] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(String, CgVal) -&gt; String
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgInputs"><span class="hs-identifier hs-var hs-var">cgInputs</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153921"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, CgVal)] -&gt; [(String, CgVal)] -&gt; [(String, CgVal)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">CgState -&gt; [(String, CgVal)]
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOutputs"><span class="hs-identifier hs-var hs-var">cgOutputs</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153921"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-345"></span><span>       </span><span id="local-6989586621681153918"><span class="annot"><span class="annottext">dupNames :: [String]
</span><a href="#local-6989586621681153918"><span class="hs-identifier hs-var hs-var">dupNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681153919"><span class="hs-identifier hs-var">allNamedVars</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">\\</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">nub</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681153919"><span class="hs-identifier hs-var">allNamedVars</span></a></span><span>
</span><span id="line-346"></span><span>   </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681153918"><span class="hs-identifier hs-var">dupNames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-347"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; IO ()
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;SBV.codeGen: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153929"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot; has following argument names duplicated: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unwords</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681153918"><span class="hs-identifier hs-var">dupNames</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span>   </span><span class="annot"><span class="annottext">(a, CgConfig, CgPgmBundle) -&gt; IO (a, CgConfig, CgPgmBundle)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681153927"><span class="hs-identifier hs-var">retVal</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CgState -&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var hs-var">cgFinalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153921"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">l -&gt; CgConfig -&gt; String -&gt; CgState -&gt; Result -&gt; CgPgmBundle
forall a.
CgTarget a =&gt;
a -&gt; CgConfig -&gt; String -&gt; CgState -&gt; Result -&gt; CgPgmBundle
</span><a href="Data.SBV.Compilers.CodeGen.html#translate"><span class="hs-identifier hs-var">translate</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621681153931"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CgState -&gt; CgConfig
</span><a href="Data.SBV.Compilers.CodeGen.html#cgFinalConfig"><span class="hs-identifier hs-var hs-var">cgFinalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153921"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153929"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">CgState
</span><a href="#local-6989586621681153921"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621681153925"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="hs-comment">-- | Render a code-gen bundle to a directory or to stdout</span><span>
</span><span id="line-352"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#renderCgPgmBundle"><span class="hs-identifier hs-type">renderCgPgmBundle</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgConfig"><span class="hs-identifier hs-type">CgConfig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmBundle"><span class="hs-identifier hs-type">CgPgmBundle</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span id="renderCgPgmBundle"><span class="annot"><span class="annottext">renderCgPgmBundle :: Maybe String -&gt; (CgConfig, CgPgmBundle) -&gt; IO ()
</span><a href="Data.SBV.Compilers.CodeGen.html#renderCgPgmBundle"><span class="hs-identifier hs-var hs-var">renderCgPgmBundle</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>        </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span>  </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681153916"><span class="annot"><span class="annottext">bundle :: CgPgmBundle
</span><a href="#local-6989586621681153916"><span class="hs-identifier hs-var">bundle</span></a></span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CgPgmBundle -&gt; IO ()
forall a. Show a =&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">print</span></span><span> </span><span class="annot"><span class="annottext">CgPgmBundle
</span><a href="#local-6989586621681153916"><span class="hs-identifier hs-var">bundle</span></a></span><span>
</span><span id="line-354"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#renderCgPgmBundle"><span class="hs-identifier hs-var">renderCgPgmBundle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681153915"><span class="annot"><span class="annottext">dirName :: String
</span><a href="#local-6989586621681153915"><span class="hs-identifier hs-var">dirName</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681153914"><span class="annot"><span class="annottext">cfg :: CgConfig
</span><a href="#local-6989586621681153914"><span class="hs-identifier hs-var">cfg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#CgPgmBundle"><span class="hs-identifier hs-type">CgPgmBundle</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621681153913"><span class="annot"><span class="annottext">files :: [(String, (CgPgmKind, [Doc]))]
</span><a href="#local-6989586621681153913"><span class="hs-identifier hs-var">files</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span>        </span><span id="local-6989586621681153912"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681153912"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Bool
</span><span class="hs-identifier hs-var">doesDirectoryExist</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153915"><span class="hs-identifier hs-var">dirName</span></a></span><span>
</span><span id="line-357"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681153912"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681153911"><span class="hs-identifier hs-var">overWrite</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Creating directory &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153915"><span class="hs-identifier hs-var">dirName</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot;..&quot;</span></span><span>
</span><span id="line-358"></span><span>                      </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; IO ()
</span><span class="hs-identifier hs-var">createDirectoryIfMissing</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153915"><span class="hs-identifier hs-var">dirName</span></a></span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span>        </span><span id="local-6989586621681153909"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681153909"><span class="hs-identifier hs-var">dups</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO Bool) -&gt; [String] -&gt; IO [String]
forall (m :: * -&gt; *) a.
Applicative m =&gt;
(a -&gt; m Bool) -&gt; [a] -&gt; m [a]
</span><span class="hs-identifier hs-var">filterM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681153908"><span class="annot"><span class="annottext">fn :: String
</span><a href="#local-6989586621681153908"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Bool
</span><span class="hs-identifier hs-var">doesFileExist</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153915"><span class="hs-identifier hs-var">dirName</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153908"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((String, (CgPgmKind, [Doc])) -&gt; String)
-&gt; [(String, (CgPgmKind, [Doc]))] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(String, (CgPgmKind, [Doc])) -&gt; String
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">[(String, (CgPgmKind, [Doc]))]
</span><a href="#local-6989586621681153913"><span class="hs-identifier hs-var">files</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span>        </span><span id="local-6989586621681153907"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681153907"><span class="hs-identifier hs-var">goOn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681153911"><span class="hs-identifier hs-var">overWrite</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681153909"><span class="hs-identifier hs-var">dups</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-363"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-364"></span><span>                  </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span>   </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-365"></span><span>                  </span><span class="hs-identifier">_</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Code generation would overwrite the following &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681153909"><span class="hs-identifier hs-var">dups</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="hs-string">&quot;file:&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="hs-string">&quot;files:&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>                                  </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; [String] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681153906"><span class="annot"><span class="annottext">fn :: String
</span><a href="#local-6989586621681153906"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-char">'\t'</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String -&gt; String
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153906"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681153909"><span class="hs-identifier hs-var">dups</span></a></span><span>
</span><span id="line-367"></span><span>                                  </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStr</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Continue? [yn] &quot;</span></span><span>
</span><span id="line-368"></span><span>                                  </span><span class="annot"><span class="annottext">Handle -&gt; IO ()
</span><span class="hs-identifier hs-var">hFlush</span></span><span> </span><span class="annot"><span class="annottext">Handle
</span><span class="hs-identifier hs-var">stdout</span></span><span>
</span><span id="line-369"></span><span>                                  </span><span id="local-6989586621681153904"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153904"><span class="hs-identifier hs-var">resp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO String
</span><span class="hs-identifier hs-var">getLine</span></span><span>
</span><span id="line-370"></span><span>                                  </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; IO Bool) -&gt; Bool -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Char) -&gt; String -&gt; String
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char
</span><span class="hs-identifier hs-var">toLower</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153904"><span class="hs-identifier hs-var">resp</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><span class="hs-operator hs-var">`isPrefixOf`</span></span><span> </span><span class="annot"><span class="hs-string">&quot;yes&quot;</span></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681153907"><span class="hs-identifier hs-var">goOn</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">((String, (CgPgmKind, [Doc])) -&gt; IO ())
-&gt; [(String, (CgPgmKind, [Doc]))] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">(String, (CgPgmKind, [Doc])) -&gt; IO ()
forall a. (String, (a, [Doc])) -&gt; IO ()
</span><a href="#local-6989586621681153902"><span class="hs-identifier hs-var">renderFile</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, (CgPgmKind, [Doc]))]
</span><a href="#local-6989586621681153913"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-373"></span><span>                        </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681153911"><span class="hs-identifier hs-var">overWrite</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Done.&quot;</span></span><span>
</span><span id="line-374"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Aborting.&quot;</span></span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681153911"><span class="annot"><span class="annottext">overWrite :: Bool
</span><a href="#local-6989586621681153911"><span class="hs-identifier hs-var hs-var">overWrite</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CgConfig -&gt; Bool
</span><a href="Data.SBV.Compilers.CodeGen.html#cgOverwriteGenerated"><span class="hs-identifier hs-var hs-var">cgOverwriteGenerated</span></a></span><span> </span><span class="annot"><span class="annottext">CgConfig
</span><a href="#local-6989586621681153914"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span>        </span><span id="local-6989586621681153902"><span class="annot"><span class="annottext">renderFile :: (String, (a, [Doc])) -&gt; IO ()
</span><a href="#local-6989586621681153902"><span class="hs-identifier hs-var hs-var">renderFile</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681153901"><span class="annot"><span class="annottext">f :: String
</span><a href="#local-6989586621681153901"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681153900"><span class="annot"><span class="annottext">ds :: [Doc]
</span><a href="#local-6989586621681153900"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681153899"><span class="annot"><span class="annottext">fn :: String
</span><a href="#local-6989586621681153899"><span class="hs-identifier hs-var hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153915"><span class="hs-identifier hs-var">dirName</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153901"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-379"></span><span>                                     </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681153911"><span class="hs-identifier hs-var">overWrite</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Generating: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153899"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot;..&quot;</span></span><span>
</span><span id="line-380"></span><span>                                     </span><span class="annot"><span class="annottext">String -&gt; String -&gt; IO ()
</span><span class="hs-identifier hs-var">writeFile</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153899"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; String
</span><a href="Data.SBV.Compilers.CodeGen.html#render%27"><span class="hs-identifier hs-var">render'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">vcat</span></span><span> </span><span class="annot"><span class="annottext">[Doc]
</span><a href="#local-6989586621681153900"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span class="hs-comment">-- | An alternative to Pretty's @render@, which might have &quot;leading&quot; white-space in empty lines. This version</span><span>
</span><span id="line-383"></span><span class="hs-comment">-- eliminates such whitespace.</span><span>
</span><span id="line-384"></span><span class="annot"><a href="Data.SBV.Compilers.CodeGen.html#render%27"><span class="hs-identifier hs-type">render'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-385"></span><span id="render%27"><span class="annot"><span class="annottext">render' :: Doc -&gt; String
</span><a href="Data.SBV.Compilers.CodeGen.html#render%27"><span class="hs-identifier hs-var hs-var">render'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unlines</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String) -&gt; (Doc -&gt; [String]) -&gt; Doc -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; String) -&gt; [String] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="#local-6989586621681153896"><span class="hs-identifier hs-var">clean</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; [String]) -&gt; (Doc -&gt; [String]) -&gt; Doc -&gt; [String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String]
</span><span class="hs-identifier hs-var">lines</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; [String]) -&gt; (Doc -&gt; String) -&gt; Doc -&gt; [String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; String
</span><span class="hs-identifier hs-var">P.render</span></span><span>
</span><span id="line-386"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681153896"><span class="annot"><span class="annottext">clean :: String -&gt; String
</span><a href="#local-6989586621681153896"><span class="hs-identifier hs-var hs-var">clean</span></a></span></span><span> </span><span id="local-6989586621681153894"><span class="annot"><span class="annottext">x :: String
</span><a href="#local-6989586621681153894"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; String -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153894"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-387"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681153894"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-388"></span></pre></body></html>