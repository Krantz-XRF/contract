<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Documentation.SBV.Examples.Existentials.Diophantine</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">sbv-8.6: SMT Based Verification: Symbolic Haskell theorem prover using SMT solving.</span><ul class="links" id="page-menu"><li><a href="src/Documentation.SBV.Examples.Existentials.Diophantine.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Levent Erkok</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>erkokl@gmail.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Documentation.SBV.Examples.Existentials.Diophantine</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Representing solutions</a></li><li><a href="#g:2">Solving diophantine equations</a></li><li><a href="#g:3">Examples</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Finding minimal natural number solutions to linear Diophantine equations,
 using explicit quantification.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Solution">Solution</a><ul class="subs"><li>= <a href="#v:Homogeneous">Homogeneous</a> [[<a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>]]</li><li>| <a href="#v:NonHomogeneous">NonHomogeneous</a> [[<a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>]] [[<a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>]]</li></ul></li><li class="src short"><a href="#v:ldn">ldn</a> :: <a href="../base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; [([<a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>], <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>)] -&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Documentation-SBV-Examples-Existentials-Diophantine.html#t:Solution" title="Documentation.SBV.Examples.Existentials.Diophantine">Solution</a></li><li class="src short"><a href="#v:basis">basis</a> :: <a href="../base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; [[<a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a>]] -&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [[<a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>]]</li><li class="src short"><a href="#v:test">test</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Documentation-SBV-Examples-Existentials-Diophantine.html#t:Solution" title="Documentation.SBV.Examples.Existentials.Diophantine">Solution</a></li><li class="src short"><a href="#v:sailors">sailors</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>]</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Representing solutions</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Solution" class="def">Solution</a> <a href="src/Documentation.SBV.Examples.Existentials.Diophantine.html#Solution" class="link">Source</a> <a href="#t:Solution" class="selflink">#</a></p><div class="doc"><p>For a homogeneous problem, the solution is any linear combination of the resulting vectors.
 For a non-homogeneous problem, the solution is any linear combination of the vectors in the
 second component plus one of the vectors in the first component.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Homogeneous" class="def">Homogeneous</a> [[<a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>]]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:NonHomogeneous" class="def">NonHomogeneous</a> [[<a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>]] [[<a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>]]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Solution">Instances</h4><details id="i:Solution" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Solution:Show:1"></span> <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Documentation-SBV-Examples-Existentials-Diophantine.html#t:Solution" title="Documentation.SBV.Examples.Existentials.Diophantine">Solution</a></span> <a href="src/Documentation.SBV.Examples.Existentials.Diophantine.html#line-27" class="link">Source</a> <a href="#t:Solution" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Solution:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-Existentials-Diophantine.html">Documentation.SBV.Examples.Existentials.Diophantine</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Documentation-SBV-Examples-Existentials-Diophantine.html#t:Solution" title="Documentation.SBV.Examples.Existentials.Diophantine">Solution</a> -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Documentation-SBV-Examples-Existentials-Diophantine.html#t:Solution" title="Documentation.SBV.Examples.Existentials.Diophantine">Solution</a> -&gt; <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Documentation-SBV-Examples-Existentials-Diophantine.html#t:Solution" title="Documentation.SBV.Examples.Existentials.Diophantine">Solution</a>] -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>Solving diophantine equations</h1></a><div class="top"><p class="src"><a id="v:ldn" class="def">ldn</a> :: <a href="../base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; [([<a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>], <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>)] -&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Documentation-SBV-Examples-Existentials-Diophantine.html#t:Solution" title="Documentation.SBV.Examples.Existentials.Diophantine">Solution</a> <a href="src/Documentation.SBV.Examples.Existentials.Diophantine.html#ldn" class="link">Source</a> <a href="#v:ldn" class="selflink">#</a></p><div class="doc"><p>ldn: Solve a (L)inear (D)iophantine equation, returning minimal solutions over (N)aturals.
 The input is given as a rows of equations, with rhs values separated into a tuple. The first
 parameter limits the search to bound: In case there are too many solutions, you might want
 to limit your search space.</p></div></div><div class="top"><p class="src"><a id="v:basis" class="def">basis</a> :: <a href="../base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; [[<a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a>]] -&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [[<a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>]] <a href="src/Documentation.SBV.Examples.Existentials.Diophantine.html#basis" class="link">Source</a> <a href="#v:basis" class="selflink">#</a></p><div class="doc"><p>Find the basis solution. By definition, the basis has all non-trivial (i.e., non-0) solutions
 that cannot be written as the sum of two other solutions. We use the mathematically equivalent
 statement that a solution is in the basis if it's least according to the natural partial
 order using the ordinary less-than relation.</p></div></div><a href="#g:3" id="g:3"><h1>Examples</h1></a><div class="top"><p class="src"><a id="v:test" class="def">test</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Documentation-SBV-Examples-Existentials-Diophantine.html#t:Solution" title="Documentation.SBV.Examples.Existentials.Diophantine">Solution</a> <a href="src/Documentation.SBV.Examples.Existentials.Diophantine.html#test" class="link">Source</a> <a href="#v:test" class="selflink">#</a></p><div class="doc"><p>Solve the equation:</p><pre>2x + y - z = 2</pre><p>We have:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>test
</code></strong>NonHomogeneous [[1,0,0],[0,2,0]] [[0,1,1],[1,0,2]]
</pre><p>which means that the solutions are of the form:</p><pre>(1, 0, 0) + k (0, 1, 1) + k' (1, 0, 2) = (1+k', k, k+2k')</pre><p>OR</p><pre>(0, 2, 0) + k (0, 1, 1) + k' (1, 0, 2) = (k', 2+k, k+2k')</pre><p>for arbitrary <code>k</code>, <code>k'</code>. It's easy to see that these are really solutions
 to the equation given. It's harder to see that they cover all possibilities,
 but a moments thought reveals that is indeed the case.</p></div></div><div class="top"><p class="src"><a id="v:sailors" class="def">sailors</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>] <a href="src/Documentation.SBV.Examples.Existentials.Diophantine.html#sailors" class="link">Source</a> <a href="#v:sailors" class="selflink">#</a></p><div class="doc"><p>A puzzle: Five sailors and a monkey escape from a naufrage and reach an island with
 coconuts. Before dawn, they gather a few of them and decide to sleep first and share
 the next day. At night, however, one of them awakes, counts the nuts, makes five parts,
 gives the remaining nut to the monkey, saves his share away, and sleeps. All other
 sailors do the same, one by one. When they all wake up in the morning, they again make 5 shares,
 and give the last remaining nut to the monkey. How many nuts were there at the beginning?</p><p>We can model this as a series of diophantine equations:</p><pre>      x_0 = 5 x_1 + 1
    4 x_1 = 5 x_2 + 1
    4 x_2 = 5 x_3 + 1
    4 x_3 = 5 x_4 + 1
    4 x_4 = 5 x_5 + 1
    4 x_5 = 5 x_6 + 1
</pre><p>We need to solve for x_0, over the naturals. If you run this program, z3 takes its time (quite long!)
 but, it eventually computes: [15621,3124,2499,1999,1599,1279,1023] as the answer.</p><p>That is:</p><pre>  * There was a total of 15621 coconuts
  * 1st sailor: 15621 = 3124*5+1, leaving 15621-3124-1 = 12496
  * 2nd sailor: 12496 = 2499*5+1, leaving 12496-2499-1 =  9996
  * 3rd sailor:  9996 = 1999*5+1, leaving  9996-1999-1 =  7996
  * 4th sailor:  7996 = 1599*5+1, leaving  7996-1599-1 =  6396
  * 5th sailor:  6396 = 1279*5+1, leaving  6396-1279-1 =  5116
  * In the morning, they had: 5116 = 1023*5+1.
</pre><p>Note that this is the minimum solution, that is, we are guaranteed that there's
 no solution with less number of coconuts. In fact, any member of <code>[15625*k-4 | k &lt;- [1..]]</code>
 is a solution, i.e., so are <code>31246</code>, <code>46871</code>, <code>62496</code>, <code>78121</code>, etc.</p><p>Note that we iteratively deepen our search by requesting increasing number of
 solutions to avoid the all-sat pitfall.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>