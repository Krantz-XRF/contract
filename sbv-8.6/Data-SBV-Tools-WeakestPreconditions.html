<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.SBV.Tools.WeakestPreconditions</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">sbv-8.6: SMT Based Verification: Symbolic Haskell theorem prover using SMT solving.</span><ul class="links" id="page-menu"><li><a href="src/Data.SBV.Tools.WeakestPreconditions.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Levent Erkok</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>erkokl@gmail.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.SBV.Tools.WeakestPreconditions</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Programs and statements</a></li><li><a href="#g:2">Invariants, measures, and stability</a></li><li><a href="#g:3">Verification conditions</a></li><li><a href="#g:4">Result of a proof</a></li><li><a href="#g:5">Configuring the WP engine</a></li><li><a href="#g:6">Checking WP correctness</a></li><li><a href="#g:7">Concrete runs of programs</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A toy imperative language with a proof system based on Dijkstra's weakest
 preconditions methodology to establish partial/total correctness proofs.</p><p>See <code>Documentation.SBV.Examples.WeakestPreconditions</code> directory for
 several example proofs.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Program">Program</a> st = <a href="#v:Program">Program</a> {<ul class="subs"><li><a href="#v:setup">setup</a> :: <a href="Data-SBV-Internals.html#t:Symbolic" title="Data.SBV.Internals">Symbolic</a> ()</li><li><a href="#v:precondition">precondition</a> :: st -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a></li><li><a href="#v:program">program</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> st</li><li><a href="#v:postcondition">postcondition</a> :: st -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a></li><li><a href="#v:stability">stability</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stable" title="Data.SBV.Tools.WeakestPreconditions">Stable</a> st</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Stmt">Stmt</a> st<ul class="subs"><li>= <a href="#v:Skip">Skip</a></li><li>| <a href="#v:Abort">Abort</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li>| <a href="#v:Assign">Assign</a> (st -&gt; st)</li><li>| <a href="#v:If">If</a> (st -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a>) (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> st) (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> st)</li><li>| <a href="#v:While">While</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Invariant" title="Data.SBV.Tools.WeakestPreconditions">Invariant</a> st) (<a href="../base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Measure" title="Data.SBV.Tools.WeakestPreconditions">Measure</a> st)) (st -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a>) (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> st)</li><li>| <a href="#v:Seq">Seq</a> [<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> st]</li></ul></li><li class="src short"><a href="#v:assert">assert</a> :: <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; (st -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a>) -&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> st</li><li class="src short"><a href="#v:stable">stable</a> :: <a href="Data-SBV-Trans.html#t:EqSymbolic" title="Data.SBV.Trans">EqSymbolic</a> a =&gt; <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; (st -&gt; a) -&gt; st -&gt; st -&gt; (<a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a>, <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Invariant">Invariant</a> st = st -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Measure">Measure</a> st = st -&gt; [<a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a>]</li><li class="src short"><span class="keyword">type</span> <a href="#t:Stable">Stable</a> st = [st -&gt; st -&gt; (<a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a>, <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a>)]</li><li class="src short"><span class="keyword">data</span> <a href="#t:VC">VC</a> st m<ul class="subs"><li>= <a href="#v:BadPrecondition">BadPrecondition</a> st</li><li>| <a href="#v:BadPostcondition">BadPostcondition</a> st st</li><li>| <a href="#v:Unstable">Unstable</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> st st</li><li>| <a href="#v:AbortReachable">AbortReachable</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> st st</li><li>| <a href="#v:InvariantPre">InvariantPre</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> st</li><li>| <a href="#v:InvariantMaintain">InvariantMaintain</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> st st</li><li>| <a href="#v:MeasureBound">MeasureBound</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> (st, [m])</li><li>| <a href="#v:MeasureDecrease">MeasureDecrease</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> (st, [m]) (st, [m])</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ProofResult">ProofResult</a> res<ul class="subs"><li>= <a href="#v:Proven">Proven</a> <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li>| <a href="#v:Indeterminate">Indeterminate</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></li><li>| <a href="#v:Failed">Failed</a> [<a href="Data-SBV-Tools-WeakestPreconditions.html#t:VC" title="Data.SBV.Tools.WeakestPreconditions">VC</a> res <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>]</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:WPConfig">WPConfig</a> = <a href="#v:WPConfig">WPConfig</a> {<ul class="subs"><li><a href="#v:wpSolver">wpSolver</a> :: <a href="Data-SBV-Internals.html#t:SMTConfig" title="Data.SBV.Internals">SMTConfig</a></li><li><a href="#v:wpVerbose">wpVerbose</a> :: <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul>}</li><li class="src short"><a href="#v:defaultWPCfg">defaultWPCfg</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:WPConfig" title="Data.SBV.Tools.WeakestPreconditions">WPConfig</a></li><li class="src short"><a href="#v:wpProve">wpProve</a> :: (<a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> res, <a href="Data-SBV-Trans.html#t:Mergeable" title="Data.SBV.Trans">Mergeable</a> st, <a href="Data-SBV-Control.html#t:Queriable" title="Data.SBV.Control">Queriable</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> st res) =&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Program" title="Data.SBV.Tools.WeakestPreconditions">Program</a> st -&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:ProofResult" title="Data.SBV.Tools.WeakestPreconditions">ProofResult</a> res)</li><li class="src short"><a href="#v:wpProveWith">wpProveWith</a> :: <span class="keyword">forall</span> st res. (<a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> res, <a href="Data-SBV-Trans.html#t:Mergeable" title="Data.SBV.Trans">Mergeable</a> st, <a href="Data-SBV-Control.html#t:Queriable" title="Data.SBV.Control">Queriable</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> st res) =&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:WPConfig" title="Data.SBV.Tools.WeakestPreconditions">WPConfig</a> -&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Program" title="Data.SBV.Tools.WeakestPreconditions">Program</a> st -&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:ProofResult" title="Data.SBV.Tools.WeakestPreconditions">ProofResult</a> res)</li><li class="src short"><a href="#v:traceExecution">traceExecution</a> :: <span class="keyword">forall</span> st. <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> st =&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Program" title="Data.SBV.Tools.WeakestPreconditions">Program</a> st -&gt; st -&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Status" title="Data.SBV.Tools.WeakestPreconditions">Status</a> st)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Status">Status</a> st<ul class="subs"><li>= <a href="#v:Good">Good</a> st</li><li>| <a href="#v:Stuck">Stuck</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:VC" title="Data.SBV.Tools.WeakestPreconditions">VC</a> st <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>)</li></ul></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Programs and statements</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Program" class="def">Program</a> st <a href="src/Data.SBV.Tools.WeakestPreconditions.html#Program" class="link">Source</a> <a href="#t:Program" class="selflink">#</a></p><div class="doc"><p>A program over a state is simply a statement, together with
 a pre-condition capturing environmental assumptions and
 a post-condition that states its correctness. In the usual
 Hoare-triple notation, it captures:</p><pre> {precondition} program {postcondition}</pre><p>We also allow for a stability check, which is ensured at
 every assignment statement to deal with ghost variables.
 In general, this is useful for making sure what you consider
 as &quot;primary inputs&quot; remain unaffected. Of course, you can
 also put any arbitrary condition you want to check that you
 want performed for each <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:Assign" title="Data.SBV.Tools.WeakestPreconditions">Assign</a></code> statement.</p><p>Note that stability is quite a strong condition: It is intended
 to capture constants that never change during execution. So,
 if you have a program that changes an input temporarily but
 always restores it at the end, it would still fail the stability
 condition.</p><p>The <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:setup" title="Data.SBV.Tools.WeakestPreconditions">setup</a></code> field is reserved for any symbolic code you might
 want to run before the proof takes place, typically for calls
 to <code><a href="Data-SBV-Internals.html#v:setOption" title="Data.SBV.Internals">setOption</a></code>. If not needed, simply pass <code>return ()</code>.
 For an interesting use case where we use setup to axiomatize
 the spec, see <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html">Documentation.SBV.Examples.WeakestPreconditions.Fib</a>
 and <a href="Documentation-SBV-Examples-WeakestPreconditions-GCD.html">Documentation.SBV.Examples.WeakestPreconditions.GCD</a>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Program" class="def">Program</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:setup" class="def">setup</a> :: <a href="Data-SBV-Internals.html#t:Symbolic" title="Data.SBV.Internals">Symbolic</a> ()</dfn><div class="doc"><p>Any set-up required</p></div></li><li><dfn class="src"><a id="v:precondition" class="def">precondition</a> :: st -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a></dfn><div class="doc"><p>Environmental assumptions</p></div></li><li><dfn class="src"><a id="v:program" class="def">program</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> st</dfn><div class="doc"><p>Program</p></div></li><li><dfn class="src"><a id="v:postcondition" class="def">postcondition</a> :: st -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a></dfn><div class="doc"><p>Correctness statement</p></div></li><li><dfn class="src"><a id="v:stability" class="def">stability</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stable" title="Data.SBV.Tools.WeakestPreconditions">Stable</a> st</dfn><div class="doc"><p>Each assignment must satisfy stability</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Stmt" class="def">Stmt</a> st <a href="src/Data.SBV.Tools.WeakestPreconditions.html#Stmt" class="link">Source</a> <a href="#t:Stmt" class="selflink">#</a></p><div class="doc"><p>A statement in our imperative program, parameterized over the state.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Skip" class="def">Skip</a></td><td class="doc"><p>Skip, do nothing.</p></td></tr><tr><td class="src"><a id="v:Abort" class="def">Abort</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>Abort execution. The name is for diagnostic purposes.</p></td></tr><tr><td class="src"><a id="v:Assign" class="def">Assign</a> (st -&gt; st)</td><td class="doc"><p>Assignment: Transform the state by a function.</p></td></tr><tr><td class="src"><a id="v:If" class="def">If</a> (st -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a>) (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> st) (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> st)</td><td class="doc"><p>Conditional: <code>If condition thenBranch elseBranch</code>.</p></td></tr><tr><td class="src"><a id="v:While" class="def">While</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Invariant" title="Data.SBV.Tools.WeakestPreconditions">Invariant</a> st) (<a href="../base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Measure" title="Data.SBV.Tools.WeakestPreconditions">Measure</a> st)) (st -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a>) (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> st)</td><td class="doc"><p>A while loop: <code>While name invariant measure condition body</code>.
 The string <code>name</code> is merely for diagnostic purposes.
 If the measure is <code><a href="../base-4.13.0.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>, then only partial correctness
 of this loop will be proven.</p></td></tr><tr><td class="src"><a id="v:Seq" class="def">Seq</a> [<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> st]</td><td class="doc"><p>A sequence of statements.</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:assert" class="def">assert</a> :: <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; (st -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a>) -&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> st <a href="src/Data.SBV.Tools.WeakestPreconditions.html#assert" class="link">Source</a> <a href="#v:assert" class="selflink">#</a></p><div class="doc"><p>An <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:assert" title="Data.SBV.Tools.WeakestPreconditions">assert</a></code> is a quick way of ensuring some condition holds. If it does,
 then it's equivalent to <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:Skip" title="Data.SBV.Tools.WeakestPreconditions">Skip</a></code>. Otherwise, it is equivalent to <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:Abort" title="Data.SBV.Tools.WeakestPreconditions">Abort</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:stable" class="def">stable</a> :: <a href="Data-SBV-Trans.html#t:EqSymbolic" title="Data.SBV.Trans">EqSymbolic</a> a =&gt; <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; (st -&gt; a) -&gt; st -&gt; st -&gt; (<a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a>, <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a>) <a href="src/Data.SBV.Tools.WeakestPreconditions.html#stable" class="link">Source</a> <a href="#v:stable" class="selflink">#</a></p><div class="doc"><p>Stability: A call of the form <code>stable &quot;f&quot; f</code> means the value of the field <code>f</code>
 does not change during any assignment. The string argument is for diagnostic
 purposes only. Note that we use strong-equality here, so if the program
 is manipulating floats, we don't get a false-positive on <code>NaN</code> and also
 not miss <code>+0</code> and <code>-</code>@ changes.</p></div></div><a href="#g:2" id="g:2"><h1>Invariants, measures, and stability</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Invariant" class="def">Invariant</a> st = st -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a> <a href="src/Data.SBV.Tools.WeakestPreconditions.html#Invariant" class="link">Source</a> <a href="#t:Invariant" class="selflink">#</a></p><div class="doc"><p>An invariant takes a state and evaluates to a boolean.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Measure" class="def">Measure</a> st = st -&gt; [<a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a>] <a href="src/Data.SBV.Tools.WeakestPreconditions.html#Measure" class="link">Source</a> <a href="#t:Measure" class="selflink">#</a></p><div class="doc"><p>A measure takes the state and returns a sequence of integers. The ordering
 will be done lexicographically over the elements.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Stable" class="def">Stable</a> st = [st -&gt; st -&gt; (<a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a>, <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a>)] <a href="src/Data.SBV.Tools.WeakestPreconditions.html#Stable" class="link">Source</a> <a href="#t:Stable" class="selflink">#</a></p><div class="doc"><p>A stability condition captures a primary input that does not change. Use <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:stable" title="Data.SBV.Tools.WeakestPreconditions">stable</a></code>
 to create elements of this type.</p></div></div><a href="#g:3" id="g:3"><h1>Verification conditions</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:VC" class="def">VC</a> st m <a href="src/Data.SBV.Tools.WeakestPreconditions.html#VC" class="link">Source</a> <a href="#t:VC" class="selflink">#</a></p><div class="doc"><p>A verification condition. Upon failure, each <code><a href="Data-SBV-Tools-WeakestPreconditions.html#t:VC" title="Data.SBV.Tools.WeakestPreconditions">VC</a></code> carries enough state and diagnostic information
 to indicate what particular proof obligation failed for further debugging.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:BadPrecondition" class="def">BadPrecondition</a> st</td><td class="doc"><p>The precondition doesn't hold. This can only happen in <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:traceExecution" title="Data.SBV.Tools.WeakestPreconditions">traceExecution</a></code>.</p></td></tr><tr><td class="src"><a id="v:BadPostcondition" class="def">BadPostcondition</a> st st</td><td class="doc"><p>The postcondition doesn't hold</p></td></tr><tr><td class="src"><a id="v:Unstable" class="def">Unstable</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> st st</td><td class="doc"><p>Stability condition is violated</p></td></tr><tr><td class="src"><a id="v:AbortReachable" class="def">AbortReachable</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> st st</td><td class="doc"><p>The named abort condition is reachable</p></td></tr><tr><td class="src"><a id="v:InvariantPre" class="def">InvariantPre</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> st</td><td class="doc"><p>Invariant doesn't hold upon entry to the named loop</p></td></tr><tr><td class="src"><a id="v:InvariantMaintain" class="def">InvariantMaintain</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> st st</td><td class="doc"><p>Invariant isn't maintained by the body</p></td></tr><tr><td class="src"><a id="v:MeasureBound" class="def">MeasureBound</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> (st, [m])</td><td class="doc"><p>Measure cannot be shown to be non-negative</p></td></tr><tr><td class="src"><a id="v:MeasureDecrease" class="def">MeasureDecrease</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> (st, [m]) (st, [m])</td><td class="doc"><p>Measure cannot be shown to decrease through each iteration</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:VC">Instances</h4><details id="i:VC" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:VC:Show:1"></span> (<a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> st, <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> m) =&gt; <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:VC" title="Data.SBV.Tools.WeakestPreconditions">VC</a> st m)</span> <a href="src/Data.SBV.Tools.WeakestPreconditions.html#line-159" class="link">Source</a> <a href="#t:VC" class="selflink">#</a></td><td class="doc"><p>Show instance for VC's</p></td></tr><tr><td colspan="2"><details id="i:id:VC:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-SBV-Tools-WeakestPreconditions.html">Data.SBV.Tools.WeakestPreconditions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:VC" title="Data.SBV.Tools.WeakestPreconditions">VC</a> st m -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:VC" title="Data.SBV.Tools.WeakestPreconditions">VC</a> st m -&gt; <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-SBV-Tools-WeakestPreconditions.html#t:VC" title="Data.SBV.Tools.WeakestPreconditions">VC</a> st m] -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:4" id="g:4"><h1>Result of a proof</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ProofResult" class="def">ProofResult</a> res <a href="src/Data.SBV.Tools.WeakestPreconditions.html#ProofResult" class="link">Source</a> <a href="#t:ProofResult" class="selflink">#</a></p><div class="doc"><p>The result of a weakest-precondition proof.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Proven" class="def">Proven</a> <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></td><td class="doc"><p>The property holds. If <code><a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></code> is <code><a href="../base-4.13.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code>, then total correctness, otherwise partial.</p></td></tr><tr><td class="src"><a id="v:Indeterminate" class="def">Indeterminate</a> <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>Failed to establish correctness. Happens when the proof obligations lead to
 the SMT solver to return <code>Unk</code>. This can happen, for instance, if you have
 non-linear constraints, causing the solver to give up.</p></td></tr><tr><td class="src"><a id="v:Failed" class="def">Failed</a> [<a href="Data-SBV-Tools-WeakestPreconditions.html#t:VC" title="Data.SBV.Tools.WeakestPreconditions">VC</a> res <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>]</td><td class="doc"><p>The property fails, failing to establish the conditions listed.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ProofResult">Instances</h4><details id="i:ProofResult" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ProofResult:Show:1"></span> <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> res =&gt; <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:ProofResult" title="Data.SBV.Tools.WeakestPreconditions">ProofResult</a> res)</span> <a href="src/Data.SBV.Tools.WeakestPreconditions.html#line-199" class="link">Source</a> <a href="#t:ProofResult" class="selflink">#</a></td><td class="doc"><p><code><a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a></code> instance for proofs, for readability.</p></td></tr><tr><td colspan="2"><details id="i:id:ProofResult:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-SBV-Tools-WeakestPreconditions.html">Data.SBV.Tools.WeakestPreconditions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:ProofResult" title="Data.SBV.Tools.WeakestPreconditions">ProofResult</a> res -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:ProofResult" title="Data.SBV.Tools.WeakestPreconditions">ProofResult</a> res -&gt; <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-SBV-Tools-WeakestPreconditions.html#t:ProofResult" title="Data.SBV.Tools.WeakestPreconditions">ProofResult</a> res] -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:5" id="g:5"><h1>Configuring the WP engine</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:WPConfig" class="def">WPConfig</a> <a href="src/Data.SBV.Tools.WeakestPreconditions.html#WPConfig" class="link">Source</a> <a href="#t:WPConfig" class="selflink">#</a></p><div class="doc"><p>Configuration for WP proofs.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:WPConfig" class="def">WPConfig</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:wpSolver" class="def">wpSolver</a> :: <a href="Data-SBV-Internals.html#t:SMTConfig" title="Data.SBV.Internals">SMTConfig</a></dfn><div class="doc"><p>SMT Solver to use</p></div></li><li><dfn class="src"><a id="v:wpVerbose" class="def">wpVerbose</a> :: <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></dfn><div class="doc"><p>Should we be chatty?</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:defaultWPCfg" class="def">defaultWPCfg</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:WPConfig" title="Data.SBV.Tools.WeakestPreconditions">WPConfig</a> <a href="src/Data.SBV.Tools.WeakestPreconditions.html#defaultWPCfg" class="link">Source</a> <a href="#v:defaultWPCfg" class="selflink">#</a></p><div class="doc"><p>Default WP configuration: Uses the default solver, and is not verbose.</p></div></div><a href="#g:6" id="g:6"><h1>Checking WP correctness</h1></a><div class="top"><p class="src"><a id="v:wpProve" class="def">wpProve</a> :: (<a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> res, <a href="Data-SBV-Trans.html#t:Mergeable" title="Data.SBV.Trans">Mergeable</a> st, <a href="Data-SBV-Control.html#t:Queriable" title="Data.SBV.Control">Queriable</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> st res) =&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Program" title="Data.SBV.Tools.WeakestPreconditions">Program</a> st -&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:ProofResult" title="Data.SBV.Tools.WeakestPreconditions">ProofResult</a> res) <a href="src/Data.SBV.Tools.WeakestPreconditions.html#wpProve" class="link">Source</a> <a href="#v:wpProve" class="selflink">#</a></p><div class="doc"><p>Check correctness using the default solver. Equivalent to <code><code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:wpProveWith" title="Data.SBV.Tools.WeakestPreconditions">wpProveWith</a></code> <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:defaultWPCfg" title="Data.SBV.Tools.WeakestPreconditions">defaultWPCfg</a></code></code>.</p></div></div><div class="top"><p class="src"><a id="v:wpProveWith" class="def">wpProveWith</a> :: <span class="keyword">forall</span> st res. (<a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> res, <a href="Data-SBV-Trans.html#t:Mergeable" title="Data.SBV.Trans">Mergeable</a> st, <a href="Data-SBV-Control.html#t:Queriable" title="Data.SBV.Control">Queriable</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> st res) =&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:WPConfig" title="Data.SBV.Tools.WeakestPreconditions">WPConfig</a> -&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Program" title="Data.SBV.Tools.WeakestPreconditions">Program</a> st -&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:ProofResult" title="Data.SBV.Tools.WeakestPreconditions">ProofResult</a> res) <a href="src/Data.SBV.Tools.WeakestPreconditions.html#wpProveWith" class="link">Source</a> <a href="#v:wpProveWith" class="selflink">#</a></p><div class="doc"><p>Checking WP based correctness</p></div></div><a href="#g:7" id="g:7"><h1>Concrete runs of programs</h1></a><div class="top"><p class="src"><a id="v:traceExecution" class="def">traceExecution</a> <a href="src/Data.SBV.Tools.WeakestPreconditions.html#traceExecution" class="link">Source</a> <a href="#v:traceExecution" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> st. <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> st</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Program" title="Data.SBV.Tools.WeakestPreconditions">Program</a> st</td><td class="doc"><p>Program</p></td></tr><tr><td class="src">-&gt; st</td><td class="doc"><p>Starting state. It must be fully concrete.</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Status" title="Data.SBV.Tools.WeakestPreconditions">Status</a> st)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Trace the execution of a program, starting from a sufficiently concrete state. (Sufficiently here means that
 all parts of the state that is used uninitialized must have concrete values, i.e., essentially the inputs.
 You can leave the &quot;temporary&quot; variables initialized by the program before use undefined or even symbolic.)
 The return value will have a <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:Good" title="Data.SBV.Tools.WeakestPreconditions">Good</a></code> state to indicate the program ended successfully, if that is the case. The
 result will be <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:Stuck" title="Data.SBV.Tools.WeakestPreconditions">Stuck</a></code> if the program aborts without completing: This can happen either by executing an <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:Abort" title="Data.SBV.Tools.WeakestPreconditions">Abort</a></code>
 statement, or some invariant gets violated, or if a metric fails to go down through a loop body.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Status" class="def">Status</a> st <a href="src/Data.SBV.Tools.WeakestPreconditions.html#Status" class="link">Source</a> <a href="#t:Status" class="selflink">#</a></p><div class="doc"><p>Are we in a good state, or in a stuck state?</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Good" class="def">Good</a> st</td><td class="doc"><p>Execution finished in the given state.</p></td></tr><tr><td class="src"><a id="v:Stuck" class="def">Stuck</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:VC" title="Data.SBV.Tools.WeakestPreconditions">VC</a> st <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>)</td><td class="doc"><p>Execution got stuck, with the failing VC</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Status">Instances</h4><details id="i:Status" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Status:Show:1"></span> <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> st =&gt; <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Status" title="Data.SBV.Tools.WeakestPreconditions">Status</a> st)</span> <a href="src/Data.SBV.Tools.WeakestPreconditions.html#line-368" class="link">Source</a> <a href="#t:Status" class="selflink">#</a></td><td class="doc"><p>Show instance for <code><a href="Data-SBV-Tools-WeakestPreconditions.html#t:Status" title="Data.SBV.Tools.WeakestPreconditions">Status</a></code></p></td></tr><tr><td colspan="2"><details id="i:id:Status:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-SBV-Tools-WeakestPreconditions.html">Data.SBV.Tools.WeakestPreconditions</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Status" title="Data.SBV.Tools.WeakestPreconditions">Status</a> st -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Status" title="Data.SBV.Tools.WeakestPreconditions">Status</a> st -&gt; <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Status" title="Data.SBV.Tools.WeakestPreconditions">Status</a> st] -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>