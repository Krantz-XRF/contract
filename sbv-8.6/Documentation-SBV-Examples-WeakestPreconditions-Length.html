<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Documentation.SBV.Examples.WeakestPreconditions.Length</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">sbv-8.6: SMT Based Verification: Symbolic Haskell theorem prover using SMT solving.</span><ul class="links" id="page-menu"><li><a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Levent Erkok</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>erkokl@gmail.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Documentation.SBV.Examples.WeakestPreconditions.Length</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Program state</a></li><li><a href="#g:2">The algorithm</a></li><li><a href="#g:3">Correctness</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Proof of correctness of an imperative list-length algorithm, using weakest
 preconditions. Illustrates the use of SBV's symbolic lists together with
 the WP algorithm.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:LenS">LenS</a> a = <a href="#v:LenS">LenS</a> {<ul class="subs"><li><a href="#v:xs">xs</a> :: <a href="Data-SBV-Internals.html#t:SList" title="Data.SBV.Internals">SList</a> a</li><li><a href="#v:ys">ys</a> :: <a href="Data-SBV-Internals.html#t:SList" title="Data.SBV.Internals">SList</a> a</li><li><a href="#v:l">l</a> :: <a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:LenC">LenC</a> a = <a href="#v:LenC">LenC</a> [a] [a] <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:S">S</a> = <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a></li><li class="src short"><a href="#v:algorithm">algorithm</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Invariant" title="Data.SBV.Tools.WeakestPreconditions">Invariant</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> -&gt; <a href="../base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Measure" title="Data.SBV.Tools.WeakestPreconditions">Measure</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a>) -&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a></li><li class="src short"><a href="#v:pre">pre</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a></li><li class="src short"><a href="#v:post">post</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a></li><li class="src short"><a href="#v:noChange">noChange</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stable" title="Data.SBV.Tools.WeakestPreconditions">Stable</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a></li><li class="src short"><a href="#v:imperativeLength">imperativeLength</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Invariant" title="Data.SBV.Tools.WeakestPreconditions">Invariant</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> -&gt; <a href="../base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Measure" title="Data.SBV.Tools.WeakestPreconditions">Measure</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a>) -&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Program" title="Data.SBV.Tools.WeakestPreconditions">Program</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a></li><li class="src short"><a href="#v:invariant">invariant</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Invariant" title="Data.SBV.Tools.WeakestPreconditions">Invariant</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a></li><li class="src short"><a href="#v:measure">measure</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Measure" title="Data.SBV.Tools.WeakestPreconditions">Measure</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a></li><li class="src short"><a href="#v:correctness">correctness</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Program state</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LenS" class="def">LenS</a> a <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#LenS" class="link">Source</a> <a href="#t:LenS" class="selflink">#</a></p><div class="doc"><p>The state of the length program, paramaterized over the element type <code>a</code></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LenS" class="def">LenS</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:xs" class="def">xs</a> :: <a href="Data-SBV-Internals.html#t:SList" title="Data.SBV.Internals">SList</a> a</dfn><div class="doc"><p>The input list</p></div></li><li><dfn class="src"><a id="v:ys" class="def">ys</a> :: <a href="Data-SBV-Internals.html#t:SList" title="Data.SBV.Internals">SList</a> a</dfn><div class="doc"><p>Copy of input</p></div></li><li><dfn class="src"><a id="v:l" class="def">l</a> :: <a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a></dfn><div class="doc"><p>Running length</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:LenS">Instances</h4><details id="i:LenS" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LenS:Queriable:1"></span> <a href="Data-SBV-Control.html#t:Queriable" title="Data.SBV.Control">Queriable</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>) (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenC" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenC</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>)</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#line-63" class="link">Source</a> <a href="#t:LenS" class="selflink">#</a></td><td class="doc"><p>We have to write the bijection between <code><a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a></code> and <code><a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenC" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenC</a></code> explicitly. Luckily, the
 definition is more or less boilerplate.</p></td></tr><tr><td colspan="2"><details id="i:id:LenS:Queriable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html">Documentation.SBV.Examples.WeakestPreconditions.Length</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:create">create</a> :: <a href="Data-SBV-Trans-Control.html#t:QueryT" title="Data.SBV.Trans.Control">QueryT</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>) <a href="src/Data.SBV.Core.Symbolic.html#create" class="link">Source</a> <a href="#v:create" class="selflink">#</a></p><p class="src"><a href="#v:project">project</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a> -&gt; <a href="Data-SBV-Trans-Control.html#t:QueryT" title="Data.SBV.Trans.Control">QueryT</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenC" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenC</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>) <a href="src/Data.SBV.Core.Symbolic.html#project" class="link">Source</a> <a href="#v:project" class="selflink">#</a></p><p class="src"><a href="#v:embed">embed</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenC" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenC</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a> -&gt; <a href="Data-SBV-Trans-Control.html#t:QueryT" title="Data.SBV.Trans.Control">QueryT</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>) <a href="src/Data.SBV.Core.Symbolic.html#embed" class="link">Source</a> <a href="#v:embed" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LenS:Show:2"></span> (<a href="Data-SBV-Internals.html#t:SymVal" title="Data.SBV.Internals">SymVal</a> a, <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a) =&gt; <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a)</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#line-51" class="link">Source</a> <a href="#t:LenS" class="selflink">#</a></td><td class="doc"><p>Show instance: A simplified version of what would otherwise be generated.</p></td></tr><tr><td colspan="2"><details id="i:id:LenS:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html">Documentation.SBV.Examples.WeakestPreconditions.Length</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a -&gt; <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a] -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LenS:Generic:3"></span> <a href="../base-4.13.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a)</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#line-40" class="link">Source</a> <a href="#t:LenS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LenS:Generic:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html">Documentation.SBV.Examples.WeakestPreconditions.Length</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.13.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a) :: <a href="../base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a -&gt; <a href="../base-4.13.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a) x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.13.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a) x -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LenS:Mergeable:4"></span> <a href="Data-SBV-Internals.html#t:SymVal" title="Data.SBV.Internals">SymVal</a> a =&gt; <a href="Data-SBV-Trans.html#t:Mergeable" title="Data.SBV.Trans">Mergeable</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a)</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#line-40" class="link">Source</a> <a href="#t:LenS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LenS:Mergeable:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html">Documentation.SBV.Examples.WeakestPreconditions.Length</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:symbolicMerge">symbolicMerge</a> :: <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a> -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a <a href="src/Data.SBV.Core.Model.html#symbolicMerge" class="link">Source</a> <a href="#v:symbolicMerge" class="selflink">#</a></p><p class="src"><a href="#v:select">select</a> :: (<a href="../base-4.13.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> b, <a href="Data-SBV-Internals.html#t:SymVal" title="Data.SBV.Internals">SymVal</a> b, <a href="../base-4.13.0.0/Prelude.html#t:Num" title="Prelude">Num</a> b) =&gt; [<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a] -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a -&gt; <a href="Data-SBV-Internals.html#t:SBV" title="Data.SBV.Internals">SBV</a> b -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a <a href="src/Data.SBV.Core.Model.html#select" class="link">Source</a> <a href="#v:select" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LenS:Rep:5"></span> <span class="keyword">type</span> <a href="../base-4.13.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a)</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#line-40" class="link">Source</a> <a href="#t:LenS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:LenS:Rep:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html">Documentation.SBV.Examples.WeakestPreconditions.Length</a></p> <div class="src"><span class="keyword">type</span> <a href="../base-4.13.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> a) = <a href="../base-4.13.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> ('<a href="../base-4.13.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;LenS&quot; &quot;Documentation.SBV.Examples.WeakestPreconditions.Length&quot; &quot;sbv-8.6-4S9z5R1TCJr59anjkda4w3&quot; '<a href="../base-4.13.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="../base-4.13.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> ('<a href="../base-4.13.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;LenS&quot; '<a href="../base-4.13.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> '<a href="../base-4.13.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.13.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../base-4.13.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../base-4.13.0.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a> &quot;xs&quot;) '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.13.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="Data-SBV-Internals.html#t:SList" title="Data.SBV.Internals">SList</a> a)) <a href="../base-4.13.0.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> (<a href="../base-4.13.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../base-4.13.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../base-4.13.0.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a> &quot;ys&quot;) '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.13.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="Data-SBV-Internals.html#t:SList" title="Data.SBV.Internals">SList</a> a)) <a href="../base-4.13.0.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="../base-4.13.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../base-4.13.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../base-4.13.0.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a> &quot;l&quot;) '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.13.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a>))))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LenC" class="def">LenC</a> a <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#LenC" class="link">Source</a> <a href="#t:LenC" class="selflink">#</a></p><div class="doc"><p>The concrete counterpart to <code><a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a></code>. Note that we can no longer use the duality
 between <code>SBV a</code> and <code>a</code> as in other examples and just use one datatype for both.
 This is because <code>SList a</code> and <code>[a]</code> are fundamentally different types. This can
 be a bit confusing at first, but the point is that it is the list that is symbolic
 in case of an <code>SList a</code>, not that we have a concrete list with symbolic elements
 in it. Subtle difference, but it is important to keep these two separate.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LenC" class="def">LenC</a> [a] [a] <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:LenC">Instances</h4><details id="i:LenC" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LenC:Queriable:1"></span> <a href="Data-SBV-Control.html#t:Queriable" title="Data.SBV.Control">Queriable</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>) (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenC" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenC</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>)</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#line-63" class="link">Source</a> <a href="#t:LenC" class="selflink">#</a></td><td class="doc"><p>We have to write the bijection between <code><a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a></code> and <code><a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenC" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenC</a></code> explicitly. Luckily, the
 definition is more or less boilerplate.</p></td></tr><tr><td colspan="2"><details id="i:id:LenC:Queriable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html">Documentation.SBV.Examples.WeakestPreconditions.Length</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:create">create</a> :: <a href="Data-SBV-Trans-Control.html#t:QueryT" title="Data.SBV.Trans.Control">QueryT</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>) <a href="src/Data.SBV.Core.Symbolic.html#create" class="link">Source</a> <a href="#v:create" class="selflink">#</a></p><p class="src"><a href="#v:project">project</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a> -&gt; <a href="Data-SBV-Trans-Control.html#t:QueryT" title="Data.SBV.Trans.Control">QueryT</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenC" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenC</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>) <a href="src/Data.SBV.Core.Symbolic.html#project" class="link">Source</a> <a href="#v:project" class="selflink">#</a></p><p class="src"><a href="#v:embed">embed</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenC" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenC</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a> -&gt; <a href="Data-SBV-Trans-Control.html#t:QueryT" title="Data.SBV.Trans.Control">QueryT</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>) <a href="src/Data.SBV.Core.Symbolic.html#embed" class="link">Source</a> <a href="#v:embed" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:LenC:Show:2"></span> <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenC" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenC</a> a)</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#line-58" class="link">Source</a> <a href="#t:LenC" class="selflink">#</a></td><td class="doc"><p>Show instance: Similarly, we want to be a bit more concise here.</p></td></tr><tr><td colspan="2"><details id="i:id:LenC:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html">Documentation.SBV.Examples.WeakestPreconditions.Length</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenC" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenC</a> a -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenC" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenC</a> a -&gt; <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenC" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenC</a> a] -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:S" class="def">S</a> = <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:LenS" title="Documentation.SBV.Examples.WeakestPreconditions.Length">LenS</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#S" class="link">Source</a> <a href="#t:S" class="selflink">#</a></p><div class="doc"><p>Helper type synonym</p></div></div><a href="#g:2" id="g:2"><h1>The algorithm</h1></a><div class="top"><p class="src"><a id="v:algorithm" class="def">algorithm</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Invariant" title="Data.SBV.Tools.WeakestPreconditions">Invariant</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> -&gt; <a href="../base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Measure" title="Data.SBV.Tools.WeakestPreconditions">Measure</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a>) -&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#algorithm" class="link">Source</a> <a href="#v:algorithm" class="selflink">#</a></p><div class="doc"><p>The imperative length algorithm:</p><pre>   ys = xs
   l  = 0
   while not (null ys)
     l  = l+1
     ys = tail ys
</pre><p>Note that we need to explicitly annotate each loop with its invariant and the termination
 measure. For convenience, we take those two as parameters, so we can experiment later.</p></div></div><div class="top"><p class="src"><a id="v:pre" class="def">pre</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#pre" class="link">Source</a> <a href="#v:pre" class="selflink">#</a></p><div class="doc"><p>Precondition for our program. Nothing! It works for all lists.</p></div></div><div class="top"><p class="src"><a id="v:post" class="def">post</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#post" class="link">Source</a> <a href="#v:post" class="selflink">#</a></p><div class="doc"><p>Postcondition for our program: <code>l</code> must be the length of the input list.</p></div></div><div class="top"><p class="src"><a id="v:noChange" class="def">noChange</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stable" title="Data.SBV.Tools.WeakestPreconditions">Stable</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#noChange" class="link">Source</a> <a href="#v:noChange" class="selflink">#</a></p><div class="doc"><p>Stability condition: Program must leave <code>xs</code> unchanged.</p></div></div><div class="top"><p class="src"><a id="v:imperativeLength" class="def">imperativeLength</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Invariant" title="Data.SBV.Tools.WeakestPreconditions">Invariant</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> -&gt; <a href="../base-4.13.0.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:Measure" title="Data.SBV.Tools.WeakestPreconditions">Measure</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a>) -&gt; <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Program" title="Data.SBV.Tools.WeakestPreconditions">Program</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#imperativeLength" class="link">Source</a> <a href="#v:imperativeLength" class="selflink">#</a></p><div class="doc"><p>A program is the algorithm, together with its pre- and post-conditions.</p></div></div><div class="top"><p class="src"><a id="v:invariant" class="def">invariant</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Invariant" title="Data.SBV.Tools.WeakestPreconditions">Invariant</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#invariant" class="link">Source</a> <a href="#v:invariant" class="selflink">#</a></p><div class="doc"><p>The invariant simply relates the length of the input to the length of the
 current suffix and the length of the prefix traversed so far.</p></div></div><div class="top"><p class="src"><a id="v:measure" class="def">measure</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Measure" title="Data.SBV.Tools.WeakestPreconditions">Measure</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Length.html#t:S" title="Documentation.SBV.Examples.WeakestPreconditions.Length">S</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#measure" class="link">Source</a> <a href="#v:measure" class="selflink">#</a></p><div class="doc"><p>The measure is obviously the length of <code>ys</code>, as we peel elements off of it through the loop.</p></div></div><a href="#g:3" id="g:3"><h1>Correctness</h1></a><div class="top"><p class="src"><a id="v:correctness" class="def">correctness</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Length.html#correctness" class="link">Source</a> <a href="#v:correctness" class="selflink">#</a></p><div class="doc"><p>We check that <code>l</code> is the length of the input list <code>xs</code> upon termination.
 Note that even though this is an inductive proof, it is fairly easy to prove with our SMT based
 technology, which doesn't really handle induction at all!  The usual inductive proof steps are baked
 into the invariant establishment phase of the WP proof. We have:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>correctness
</code></strong>Total correctness is established.
Q.E.D.
</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>