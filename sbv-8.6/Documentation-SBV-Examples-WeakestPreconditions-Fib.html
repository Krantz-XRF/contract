<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Documentation.SBV.Examples.WeakestPreconditions.Fib</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">sbv-8.6: SMT Based Verification: Symbolic Haskell theorem prover using SMT solving.</span><ul class="links" id="page-menu"><li><a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Levent Erkok</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>erkokl@gmail.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Documentation.SBV.Examples.WeakestPreconditions.Fib</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Program state</a></li><li><a href="#g:2">The algorithm</a></li><li><a href="#g:3">Correctness</a></li><li><a href="#g:4">Concrete execution</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Proof of correctness of an imperative fibonacci algorithm, using weakest
 preconditions. Note that due to the recursive nature of fibonacci, we
 cannot write the spec directly, so we use an uninterpreted function
 and proper axioms to complete the proof.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:FibS">FibS</a> a = <a href="#v:FibS">FibS</a> {<ul class="subs"><li><a href="#v:n">n</a> :: a</li><li><a href="#v:i">i</a> :: a</li><li><a href="#v:k">k</a> :: a</li><li><a href="#v:m">m</a> :: a</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:F">F</a> = <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> <a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a></li><li class="src short"><a href="#v:algorithm">algorithm</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:F" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">F</a></li><li class="src short"><a href="#v:fib">fib</a> :: <a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a> -&gt; <a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a></li><li class="src short"><a href="#v:axiomatizeFib">axiomatizeFib</a> :: <a href="Data-SBV-Internals.html#t:Symbolic" title="Data.SBV.Internals">Symbolic</a> ()</li><li class="src short"><a href="#v:pre">pre</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:F" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">F</a> -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a></li><li class="src short"><a href="#v:post">post</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:F" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">F</a> -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a></li><li class="src short"><a href="#v:noChange">noChange</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stable" title="Data.SBV.Tools.WeakestPreconditions">Stable</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:F" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">F</a></li><li class="src short"><a href="#v:imperativeFib">imperativeFib</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Program" title="Data.SBV.Tools.WeakestPreconditions">Program</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:F" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">F</a></li><li class="src short"><a href="#v:correctness">correctness</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:ProofResult" title="Data.SBV.Tools.WeakestPreconditions">ProofResult</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>))</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Program state</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FibS" class="def">FibS</a> a <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#FibS" class="link">Source</a> <a href="#t:FibS" class="selflink">#</a></p><div class="doc"><p>The state for the sum program, parameterized over a base type <code>a</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FibS" class="def">FibS</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:n" class="def">n</a> :: a</dfn><div class="doc"><p>The input value</p></div></li><li><dfn class="src"><a id="v:i" class="def">i</a> :: a</dfn><div class="doc"><p>Loop counter</p></div></li><li><dfn class="src"><a id="v:k" class="def">k</a> :: a</dfn><div class="doc"><p>tracks <code>fib (i+1)</code></p></div></li><li><dfn class="src"><a id="v:m" class="def">m</a> :: a</dfn><div class="doc"><p>tracks <code>fib i</code></p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:FibS">Instances</h4><details id="i:FibS" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FibS:Functor:1"></span> <a href="../base-4.13.0.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a></span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#line-42" class="link">Source</a> <a href="#t:FibS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FibS:Functor:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html">Documentation.SBV.Examples.WeakestPreconditions.Fib</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> b -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FibS:Foldable:2"></span> <a href="../base-4.13.0.0/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a></span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#line-42" class="link">Source</a> <a href="#t:FibS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FibS:Foldable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html">Documentation.SBV.Examples.WeakestPreconditions.Fib</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fold">fold</a> :: <a href="../base-4.13.0.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> m =&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> m -&gt; m <a href="#v:fold" class="selflink">#</a></p><p class="src"><a href="#v:foldMap">foldMap</a> :: <a href="../base-4.13.0.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> m =&gt; (a -&gt; m) -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; m <a href="#v:foldMap" class="selflink">#</a></p><p class="src"><a href="#v:foldMap-39-">foldMap'</a> :: <a href="../base-4.13.0.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> m =&gt; (a -&gt; m) -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; m <a href="#v:foldMap-39-" class="selflink">#</a></p><p class="src"><a href="#v:foldr">foldr</a> :: (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; b <a href="#v:foldr" class="selflink">#</a></p><p class="src"><a href="#v:foldr-39-">foldr'</a> :: (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; b <a href="#v:foldr-39-" class="selflink">#</a></p><p class="src"><a href="#v:foldl">foldl</a> :: (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; b <a href="#v:foldl" class="selflink">#</a></p><p class="src"><a href="#v:foldl-39-">foldl'</a> :: (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; b <a href="#v:foldl-39-" class="selflink">#</a></p><p class="src"><a href="#v:foldr1">foldr1</a> :: (a -&gt; a -&gt; a) -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; a <a href="#v:foldr1" class="selflink">#</a></p><p class="src"><a href="#v:foldl1">foldl1</a> :: (a -&gt; a -&gt; a) -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; a <a href="#v:foldl1" class="selflink">#</a></p><p class="src"><a href="#v:toList">toList</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; [a] <a href="#v:toList" class="selflink">#</a></p><p class="src"><a href="#v:null">null</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:null" class="selflink">#</a></p><p class="src"><a href="#v:length">length</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="#v:length" class="selflink">#</a></p><p class="src"><a href="#v:elem">elem</a> :: <a href="../base-4.13.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a =&gt; a -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:elem" class="selflink">#</a></p><p class="src"><a href="#v:maximum">maximum</a> :: <a href="../base-4.13.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a =&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; a <a href="#v:maximum" class="selflink">#</a></p><p class="src"><a href="#v:minimum">minimum</a> :: <a href="../base-4.13.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a =&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; a <a href="#v:minimum" class="selflink">#</a></p><p class="src"><a href="#v:sum">sum</a> :: <a href="../base-4.13.0.0/Prelude.html#t:Num" title="Prelude">Num</a> a =&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; a <a href="#v:sum" class="selflink">#</a></p><p class="src"><a href="#v:product">product</a> :: <a href="../base-4.13.0.0/Prelude.html#t:Num" title="Prelude">Num</a> a =&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; a <a href="#v:product" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FibS:Traversable:3"></span> <a href="../base-4.13.0.0/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a></span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#line-42" class="link">Source</a> <a href="#t:FibS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FibS:Traversable:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html">Documentation.SBV.Examples.WeakestPreconditions.Fib</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:traverse">traverse</a> :: <a href="../base-4.13.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> f =&gt; (a -&gt; f b) -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; f (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> b) <a href="#v:traverse" class="selflink">#</a></p><p class="src"><a href="#v:sequenceA">sequenceA</a> :: <a href="../base-4.13.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> f =&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> (f a) -&gt; f (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a) <a href="#v:sequenceA" class="selflink">#</a></p><p class="src"><a href="#v:mapM">mapM</a> :: <a href="../base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; m (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> b) <a href="#v:mapM" class="selflink">#</a></p><p class="src"><a href="#v:sequence">sequence</a> :: <a href="../base-4.13.0.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> (m a) -&gt; m (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a) <a href="#v:sequence" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FibS:Fresh:4"></span> (<a href="Data-SBV-Internals.html#t:SymVal" title="Data.SBV.Internals">SymVal</a> a, <a href="Data-SBV-Trans-Control.html#t:SMTValue" title="Data.SBV.Trans.Control">SMTValue</a> a) =&gt; <a href="Data-SBV-Control.html#t:Fresh" title="Data.SBV.Control">Fresh</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> (<a href="Data-SBV-Internals.html#t:SBV" title="Data.SBV.Internals">SBV</a> a))</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#line-53" class="link">Source</a> <a href="#t:FibS" class="selflink">#</a></td><td class="doc"><p><code><a href="Data-SBV-Control.html#t:Fresh" title="Data.SBV.Control">Fresh</a></code> instance for the program state</p></td></tr><tr><td colspan="2"><details id="i:id:FibS:Fresh:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html">Documentation.SBV.Examples.WeakestPreconditions.Fib</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fresh">fresh</a> :: <a href="Data-SBV-Trans-Control.html#t:QueryT" title="Data.SBV.Trans.Control">QueryT</a> <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> (<a href="Data-SBV-Internals.html#t:SBV" title="Data.SBV.Internals">SBV</a> a)) <a href="src/Data.SBV.Core.Symbolic.html#fresh" class="link">Source</a> <a href="#v:fresh" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FibS:Show:5"></span> <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a)</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#line-42" class="link">Source</a> <a href="#t:FibS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FibS:Show:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html">Documentation.SBV.Examples.WeakestPreconditions.Fib</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a] -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FibS:Show:6"></span> (<a href="Data-SBV-Internals.html#t:SymVal" title="Data.SBV.Internals">SymVal</a> a, <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a) =&gt; <a href="../base-4.13.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> (<a href="Data-SBV-Internals.html#t:SBV" title="Data.SBV.Internals">SBV</a> a))</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#line-46" class="link">Source</a> <a href="#t:FibS" class="selflink">#</a></td><td class="doc"><p>Show instance for <code><a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a></code>. The above deriving clause would work just as well,
 but we want it to be a little prettier here, and hence the <code>OVERLAPS</code> directive.</p></td></tr><tr><td colspan="2"><details id="i:id:FibS:Show:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html">Documentation.SBV.Examples.WeakestPreconditions.Fib</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.13.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> (<a href="Data-SBV-Internals.html#t:SBV" title="Data.SBV.Internals">SBV</a> a) -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> (<a href="Data-SBV-Internals.html#t:SBV" title="Data.SBV.Internals">SBV</a> a) -&gt; <a href="../base-4.13.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> (<a href="Data-SBV-Internals.html#t:SBV" title="Data.SBV.Internals">SBV</a> a)] -&gt; <a href="../base-4.13.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FibS:Generic:7"></span> <a href="../base-4.13.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a)</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#line-42" class="link">Source</a> <a href="#t:FibS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FibS:Generic:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html">Documentation.SBV.Examples.WeakestPreconditions.Fib</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.13.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a) :: <a href="../base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.13.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; <a href="../base-4.13.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a) x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.13.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a) x -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FibS:Mergeable:8"></span> <a href="Data-SBV-Trans.html#t:Mergeable" title="Data.SBV.Trans">Mergeable</a> a =&gt; <a href="Data-SBV-Trans.html#t:Mergeable" title="Data.SBV.Trans">Mergeable</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a)</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#line-42" class="link">Source</a> <a href="#t:FibS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FibS:Mergeable:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html">Documentation.SBV.Examples.WeakestPreconditions.Fib</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:symbolicMerge">symbolicMerge</a> :: <a href="../base-4.13.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a> -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a <a href="src/Data.SBV.Core.Model.html#symbolicMerge" class="link">Source</a> <a href="#v:symbolicMerge" class="selflink">#</a></p><p class="src"><a href="#v:select">select</a> :: (<a href="../base-4.13.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> b, <a href="Data-SBV-Internals.html#t:SymVal" title="Data.SBV.Internals">SymVal</a> b, <a href="../base-4.13.0.0/Prelude.html#t:Num" title="Prelude">Num</a> b) =&gt; [<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a] -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a -&gt; <a href="Data-SBV-Internals.html#t:SBV" title="Data.SBV.Internals">SBV</a> b -&gt; <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a <a href="src/Data.SBV.Core.Model.html#select" class="link">Source</a> <a href="#v:select" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FibS:Rep:9"></span> <span class="keyword">type</span> <a href="../base-4.13.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a)</span> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#line-42" class="link">Source</a> <a href="#t:FibS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FibS:Rep:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html">Documentation.SBV.Examples.WeakestPreconditions.Fib</a></p> <div class="src"><span class="keyword">type</span> <a href="../base-4.13.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> a) = <a href="../base-4.13.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> ('<a href="../base-4.13.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;FibS&quot; &quot;Documentation.SBV.Examples.WeakestPreconditions.Fib&quot; &quot;sbv-8.6-4S9z5R1TCJr59anjkda4w3&quot; '<a href="../base-4.13.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="../base-4.13.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> ('<a href="../base-4.13.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;FibS&quot; '<a href="../base-4.13.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> '<a href="../base-4.13.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) ((<a href="../base-4.13.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../base-4.13.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../base-4.13.0.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a> &quot;n&quot;) '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.13.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> a) <a href="../base-4.13.0.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="../base-4.13.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../base-4.13.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../base-4.13.0.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a> &quot;i&quot;) '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.13.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> a)) <a href="../base-4.13.0.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> (<a href="../base-4.13.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../base-4.13.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../base-4.13.0.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a> &quot;k&quot;) '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.13.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> a) <a href="../base-4.13.0.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="../base-4.13.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../base-4.13.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../base-4.13.0.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a> &quot;m&quot;) '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> '<a href="../base-4.13.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.13.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> a))))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:F" class="def">F</a> = <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> <a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#F" class="link">Source</a> <a href="#t:F" class="selflink">#</a></p><div class="doc"><p>Helper type synonym</p></div></div><a href="#g:2" id="g:2"><h1>The algorithm</h1></a><div class="top"><p class="src"><a id="v:algorithm" class="def">algorithm</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stmt" title="Data.SBV.Tools.WeakestPreconditions">Stmt</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:F" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">F</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#algorithm" class="link">Source</a> <a href="#v:algorithm" class="selflink">#</a></p><div class="doc"><p>The imperative fibonacci algorithm:</p><pre>    i = 0
    k = 1
    m = 0
    while i &lt; n:
       m, k = k, m + k
       i++
</pre><p>When the loop terminates, <code>m</code> contains <code>fib(n)</code>.</p></div></div><div class="top"><p class="src"><a id="v:fib" class="def">fib</a> :: <a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a> -&gt; <a href="Data-SBV-Internals.html#t:SInteger" title="Data.SBV.Internals">SInteger</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#fib" class="link">Source</a> <a href="#v:fib" class="selflink">#</a></p><div class="doc"><p>Symbolic fibonacci as our specification. Note that we cannot
 really implement the fibonacci function since it is not
 symbolically terminating.  So, we instead uninterpret and
 axiomatize it below.</p><p>NB. The concrete part of the definition is only used in calls to <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:traceExecution" title="Data.SBV.Tools.WeakestPreconditions">traceExecution</a></code>
 and is not needed for the proof. If you don't need to call <code><a href="Data-SBV-Tools-WeakestPreconditions.html#v:traceExecution" title="Data.SBV.Tools.WeakestPreconditions">traceExecution</a></code>, you
 can simply ignore that part and directly uninterpret.</p></div></div><div class="top"><p class="src"><a id="v:axiomatizeFib" class="def">axiomatizeFib</a> :: <a href="Data-SBV-Internals.html#t:Symbolic" title="Data.SBV.Internals">Symbolic</a> () <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#axiomatizeFib" class="link">Source</a> <a href="#v:axiomatizeFib" class="selflink">#</a></p><div class="doc"><p>Constraints and axioms we need to state explicitly to tell
 the SMT solver about our specification for fibonacci.</p></div></div><div class="top"><p class="src"><a id="v:pre" class="def">pre</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:F" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">F</a> -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#pre" class="link">Source</a> <a href="#v:pre" class="selflink">#</a></p><div class="doc"><p>Precondition for our program: <code>n</code> must be non-negative.</p></div></div><div class="top"><p class="src"><a id="v:post" class="def">post</a> :: <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:F" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">F</a> -&gt; <a href="Data-SBV-Internals.html#t:SBool" title="Data.SBV.Internals">SBool</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#post" class="link">Source</a> <a href="#v:post" class="selflink">#</a></p><div class="doc"><p>Postcondition for our program: <code>m = fib n</code></p></div></div><div class="top"><p class="src"><a id="v:noChange" class="def">noChange</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Stable" title="Data.SBV.Tools.WeakestPreconditions">Stable</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:F" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">F</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#noChange" class="link">Source</a> <a href="#v:noChange" class="selflink">#</a></p><div class="doc"><p>Stability condition: Program must leave <code>n</code> unchanged.</p></div></div><div class="top"><p class="src"><a id="v:imperativeFib" class="def">imperativeFib</a> :: <a href="Data-SBV-Tools-WeakestPreconditions.html#t:Program" title="Data.SBV.Tools.WeakestPreconditions">Program</a> <a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:F" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">F</a> <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#imperativeFib" class="link">Source</a> <a href="#v:imperativeFib" class="selflink">#</a></p><div class="doc"><p>A program is the algorithm, together with its pre- and post-conditions.</p></div></div><a href="#g:3" id="g:3"><h1>Correctness</h1></a><div class="top"><p class="src"><a id="v:correctness" class="def">correctness</a> :: <a href="../base-4.13.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Data-SBV-Tools-WeakestPreconditions.html#t:ProofResult" title="Data.SBV.Tools.WeakestPreconditions">ProofResult</a> (<a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#t:FibS" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">FibS</a> <a href="../base-4.13.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a>)) <a href="src/Documentation.SBV.Examples.WeakestPreconditions.Fib.html#correctness" class="link">Source</a> <a href="#v:correctness" class="selflink">#</a></p><div class="doc"><p>With the axioms in place, it is trivial to establish correctness:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>correctness
</code></strong>Total correctness is established.
Q.E.D.
</pre><p>Note that I found this proof to be quite fragile: If you do not get the algorithm right
 or the axioms aren't in place, z3 simply goes to an infinite loop, instead of providing
 counter-examples. Of course, this is to be expected with the quantifiers present.</p></div></div><a href="#g:4" id="g:4"><h1>Concrete execution</h1></a><div class="doc empty">&nbsp;</div><div class="doc"><p>Example concrete run. As we mentioned in the definition for <code><a href="Documentation-SBV-Examples-WeakestPreconditions-Fib.html#v:fib" title="Documentation.SBV.Examples.WeakestPreconditions.Fib">fib</a></code>, the concrete-execution
function cannot deal with uninterpreted functions and axioms for obvious reasons. In those
cases we revert to the concrete definition. Here's an example run:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>traceExecution imperativeFib $ FibS {n = 3, i = 0, k = 0, m = 0}
</code></strong>*** Precondition holds, starting execution:
  {n = 3, i = 0, k = 0, m = 0}
===&gt; [1.1] Assign
  {n = 3, i = 0, k = 1, m = 0}
===&gt; [1.2] Conditional, taking the &quot;then&quot; branch
  {n = 3, i = 0, k = 1, m = 0}
===&gt; [1.2.1] Skip
  {n = 3, i = 0, k = 1, m = 0}
===&gt; [1.3] Loop &quot;i &lt; n&quot;: condition holds, executing the body
  {n = 3, i = 0, k = 1, m = 0}
===&gt; [1.3.{1}.1] Assign
  {n = 3, i = 0, k = 1, m = 1}
===&gt; [1.3.{1}.2] Assign
  {n = 3, i = 1, k = 1, m = 1}
===&gt; [1.3] Loop &quot;i &lt; n&quot;: condition holds, executing the body
  {n = 3, i = 1, k = 1, m = 1}
===&gt; [1.3.{2}.1] Assign
  {n = 3, i = 1, k = 2, m = 1}
===&gt; [1.3.{2}.2] Assign
  {n = 3, i = 2, k = 2, m = 1}
===&gt; [1.3] Loop &quot;i &lt; n&quot;: condition holds, executing the body
  {n = 3, i = 2, k = 2, m = 1}
===&gt; [1.3.{3}.1] Assign
  {n = 3, i = 2, k = 3, m = 2}
===&gt; [1.3.{3}.2] Assign
  {n = 3, i = 3, k = 3, m = 2}
===&gt; [1.3] Loop &quot;i &lt; n&quot;: condition fails, terminating
  {n = 3, i = 3, k = 3, m = 2}
*** Program successfully terminated, post condition holds of the final state:
  {n = 3, i = 3, k = 3, m = 2}
Program terminated successfully. Final state:
  {n = 3, i = 3, k = 3, m = 2}
</pre><p>As expected, <code>fib 3</code> is <code>2</code>.</p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>